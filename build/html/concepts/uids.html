<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>uids &mdash; LDMud UNRELEASED documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'UNRELEASED',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="LDMud UNRELEASED documentation" href="../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="uids">
<div class="section" id="SYNOPSIS">
<h2>SYNOPSIS<a class="headerlink" href="#SYNOPSIS" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" id="lpc.uids" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">uids:</th><td class="field-body"><span class="first last">userids</span></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="DESCRIPTION">
<h2>DESCRIPTION<a class="headerlink" href="#DESCRIPTION" title="Permalink to this headline">¶</a></h2>
<p>Every object in the mud is attributed with a user-id &#8216;uid&#8217;: a string
which associates the object with a certain &#8216;user&#8217; (aka &#8216;wizard&#8217; or
&#8216;creator&#8217;, though it is not limited to that). The uid can be 0, which
internally is the default-uid.</p>
<p>The uid serves a dual purpose: on the on hand it is used to gather
statistics about the various groups of objects (in the famous
&#8216;wizlist&#8217;), on the other hand the uid can come in handy in the
implementation of security systems.</p>
<p>The uid of an object is assigned at its creation through the
driver hooks H_LOAD_UIDS for loaded objects, and H_CLONE_UIDS
for cloned objects, and can&#8217;t be changed afterwards.</p>
<p>The uid of an object can be queried with the efun getuid() (resp.
creator() in compat-mode).</p>
<p>Every object also has a second string attribute, the &#8216;effective
userid&#8217; or &#8216;euid&#8217;, which also may be 0. This value was intended to
implement a security system based on difference between theoretical
and effective permissions. Since the effectiveness of this system is
doubtful, the driver enforces such a use only as an option.</p>
<p>As uids, euids are assigned at an objects creation through
the two aformentioned driverhooks. They can be queried with
the efun geteuid() and changed with the efun seteuid(). Calls
to the latter are verified by the master lfun valid_seteuid().</p>
<p>Additionally objects can impose their uid onto an other objects
euid with the efun export_uid().</p>
<p>If the driver is run in &#8216;strict euids&#8217; mode, euids are taken
more seriously than being just another attribute:</p>
<blockquote>
<div><ul class="simple">
<li>all objects must have a non-0 uid.</li>
<li>objects with a 0 euid can&#8217;t load or clone other objects.</li>
<li>the backbone uid as returned by master::get_bb_uid() must
not be 0.</li>
</ul>
</div></blockquote>
<p>Userids are assigned at the time of the creation of an object
by calling the driverhooks H_LOAD_UIDS and H_CLONE_UIDS:</p>
<blockquote>
<div>mixed &lt;load_uids closure&gt; (string objectname)
mixed &lt;clone_uids closure&gt;(object blueprint, string objectname)</div></blockquote>
<p>When an object is newly loaded, the H_LOAD_UIDS hook is
called with the object name as argument.</p>
<p>When an object is cloned, the H_CLONE_UIDS hook is called
with the blueprint object as first and the clone&#8217;s designated
name as second argument.</p>
<p>In both cases the new object already exists, but has 0 uids.</p>
<p>For the result, the following possibilities exist (&lt;num&gt; is
a non-zero number, &lt;no-string&gt; is anything but a string):</p>
<blockquote>
<div>&#8220;&lt;uid&gt;&#8221;                    -&gt; uid = &#8220;&lt;uid&gt;&#8221;, euid = &#8220;&lt;uid&gt;&#8221;
({ &#8220;&lt;uid&gt;&#8221;, &#8220;&lt;euid&gt;&#8221; })    -&gt; uid = &#8220;&lt;uid&gt;&#8221;, euid = &#8220;&lt;euid&gt;&#8221;
({ &#8220;&lt;uid&gt;&#8221;, &lt;no-string&gt; }) -&gt; uid = &#8220;&lt;uid&gt;&#8221;, euid = 0</div></blockquote>
<p>If strict-euids is not active, the following results are
possible, too:</p>
<blockquote>
<div>&lt;num&gt;                      -&gt; uid = &#8216;default&#8217;, euid = 0
({ &lt;num&gt;, &#8220;&lt;euid&gt;&#8221; })      -&gt; uid = &#8216;default&#8217;, euid = &#8220;&lt;euid&gt;&#8221;
({ &lt;num&gt;, &lt;no-string&gt; })   -&gt; uid = &#8216;default&#8217;, euid = 0</div></blockquote>
<p>Slightly different rules apply to the (e)uid of the master.
The master&#8217;s (e)uid is determined by a call to
master-&gt;get_master_uid():</p>
<blockquote>
<div>&#8220;&lt;uid&#8221;&gt; -&gt; uid = &#8220;&lt;uid&gt;&#8221;, euid = &#8220;&lt;uid&gt;&#8221;</div></blockquote>
<p>In non-strict-euids mode, more results are possible:</p>
<blockquote>
<div>0       -&gt; uid = 0, euid = 0
&lt;num&gt;   -&gt; uid = &#8216;default&#8217;, euid = 0</div></blockquote>
<p>If your uids are in general based on filenames, it is wise to return a
value here which can not be legally generated from any filename.  OSB
for example uses &#8216;ze/us&#8217;.</p>
<p>The masters uid is determined only on startup this way, at runtime the
uids of a reloaded master determined as for every object by a call to
the appropriate driver hooks.</p>
<h2 id="see2also">SEE ALSO<a class="headerlink" href="#DESCRIPTION" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="native.html#lpc.native" title="native"><span class="xref lpc lpc-concept">native</span></a>, <a class="reference internal" href="../obsolete/get_root_uid.html#lpc.get_root_uid" title="get_root_uid"><code class="xref lpc lpc-master docutils literal"><span class="pre">get_root_uid</span></code>(M)</a>, <a class="reference internal" href="../master/valid_seteuid.html#lpc.valid_seteuid" title="valid_seteuid"><code class="xref lpc lpc-master docutils literal"><span class="pre">valid_seteuid</span></code>(M)</a>, <a class="reference internal" href="objects.html#lpc.objects" title="objects"><span class="xref lpc lpc-concept">objects</span></a>, <a class="reference internal" href="../efun/clone_object.html#lpc.clone_object" title="clone_object"><code class="xref lpc lpc-efun docutils literal"><span class="pre">clone_object</span></code>(E)</a>, <a class="reference internal" href="../efun/geteuid.html#lpc.geteuid" title="geteuid"><code class="xref lpc lpc-efun docutils literal"><span class="pre">geteuid</span></code>(E)</a>, <a class="reference internal" href="../efun/getuid.html#lpc.getuid" title="getuid"><code class="xref lpc lpc-efun docutils literal"><span class="pre">getuid</span></code>(E)</a>, <a class="reference internal" href="../efun/seteuid.html#lpc.seteuid" title="seteuid"><code class="xref lpc lpc-efun docutils literal"><span class="pre">seteuid</span></code>(E)</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">uids</a><ul>
<li><a class="reference internal" href="#SYNOPSIS">SYNOPSIS</a></li>
<li><a class="reference internal" href="#DESCRIPTION">DESCRIPTION</a></li>
</ul>
</li>
</ul>
<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hook/hook.html">hooks</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;good question.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../_sources/concepts/uids.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>