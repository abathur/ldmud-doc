<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>intermud.basic &mdash; LDMud UNRELEASED documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'UNRELEASED',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="LDMud UNRELEASED documentation" href="../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="intermud.basic">
<div class="section" id="SYNOPSIS">
<h2>SYNOPSIS<a class="headerlink" href="#SYNOPSIS" title="Permalink to this headline">¶</a></h2>
<p id="lpc.intermud.basic">intermud.basic</p>
</div>
<div class="section" id="DESCRIPTION">
<h2>DESCRIPTION<a class="headerlink" href="#DESCRIPTION" title="Permalink to this headline">¶</a></h2>
<p>Here is how intermud data is sent across the internet - specific
for Zebedee Intermud (aka Intermud 2).</p>
<div class="section" id="ADVANCED PROTOCOL">
<span id="lpc.ADVANCED PROTOCOL"></span><h3>ADVANCED PROTOCOL<a class="headerlink" href="#ADVANCED PROTOCOL" title="Permalink to this headline">¶</a></h3>
<p>This file was originally written as a brief outline of the intermud
protocol for use by developers interested in incorperating similar,
compatible intermud protocols into their own mud systems. It is
included here as it provides a much more detailed description of the
intermud protocol than that provided by the original PROTOCOL file,
and hence may be of use to LpMud developers.</p>
</div>
<div class="section" id="PACKET PROTOCOL / FORMAT">
<span id="lpc.PACKET PROTOCOL / FORMAT"></span><h3>PACKET PROTOCOL / FORMAT<a class="headerlink" href="#PACKET PROTOCOL / FORMAT" title="Permalink to this headline">¶</a></h3>
<p>All information is transferred as a string via a UDP port (each mud
has 1 send and 1 receive port). This kindof transfer is inherently
unreliable, but it&#8217;s fast and doesn&#8217;t use up file descriptors.
The format of the strings (packets) is as follows:</p>
<blockquote>
<div>header1:body1|headerN:bodyN|DATA:body-data</div></blockquote>
<p>In other words, a header name, followed by a : and then the data
associated with this header. Each header/body pair is separated by
the | character. This means that headers and their body cannot
contain the | character. You should check for this in outgoing
packets to aviod decoding errors at the recieving end. The exception
to this is the DATA field. If it is present, it is ALWAYS positioned
at the end of the packet. Once a DATA header is found, everything
following it is interpreted as the body of the DATA field. This
means it can contain special characters without error and it is
used to carry the main body or data of all packets.</p>
<p>By convention, predefined system fields will use capital letters for
field headers and custom headers used by specific applications will
use lowercase names to avoid clashes. The defined system fields are
generally refered to by a set of macros which are defined in a
common header file for clarity.</p>
<p>There is one exception to this header format; If the data is too
large to be transmitted in one single packet, it will be split into
packets of convenient size, each with a special unique packet header
to enable them to be reassembled at the receiving end. These
headers are of the format:</p>
<blockquote>
<div>PKT:mudname:packet-id:packet-number/total-packets|rest-of-packet</div></blockquote>
<p>In this case, the mudname and packet-id combine to form a unique id
for the packet. The packet-number and total-packets information is
used to determine when all buffered packets have been received. The
rest-of-packet part is not parsed, but is stored while the receiver
awaits the other parts of the packet. When/if all parts have been
received they are concatenated and decoded as a normal packet.</p>
</div>
<div class="section" id="PACKET ENCODING / DECODING">
<span id="lpc.PACKET ENCODING / DECODING"></span><h3>PACKET ENCODING / DECODING<a class="headerlink" href="#PACKET ENCODING / DECODING" title="Permalink to this headline">¶</a></h3>
<p>Only 2 generic data types are fully suported within the inetd code
itself (namely strings and integers), though others can easily be
used by converting them to one of the supported data types before
transfer and converting back again in receipt. The LpMud &#8220;object&#8221;
data type is converted to a string automatically by the inetd on
encoding, but no such conversion is carried out on decoding.</p>
<p>On encoding integers are simply converted to a corresponding string.
Strings are left untouched as long as there is no ambiguity as to
wether they should be decoded as a string or an integer. In this
case of ambiguity, the string is prepended with a $ character. If
the first character of a string is the $ character, it is escaped
by prepending another $ character. On decoding, any string with a $
as its first character will have it removed and will then be treated
as a string. Any remaining strings that can be converted to an
integer and then back to a string with no loss of information are
considered to be integers. Any remaining strings are treated as
such and are left unaltered.</p>
</div>
<div class="section" id="DEFINED SYSTEM HEADERS">
<span id="lpc.DEFINED SYSTEM HEADERS"></span><h3>DEFINED SYSTEM HEADERS<a class="headerlink" href="#DEFINED SYSTEM HEADERS" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>&#8220;RCPNT&#8221; (RECIPIENT)</dt>
<dd>The body of this field should contiain the recipient the message
is to be sent to if applicable.</dd>
<dt>&#8220;REQ&#8221; (REQUEST)</dt>
<dd>The name of the intermud request that is being made of the
receiving mud. Standard requests that should be supported by
all systems are &#8220;ping&#8221; (PING), &#8220;query&#8221; (QUERY), and &#8220;reply&#8221;
(REPLY). The PING request is used to determine wether or not a
mud is active. The QUERY request is used to query a remote mud
for information about itself (look at the udp/query module for
details of what information can be requested). The REPLY request
is special in that it is the request name used for all replies
made to by mud B to an initial request made by a mud A. It is
mud A&#8217;s responsibility to keep track of the original request
type so that the reply can be handled appropriately.</dd>
<dt>&#8220;SND&#8221; (SENDER)</dt>
<dd>The name of the person or object which sent the request or to
whom replies should be directed. This is essential if a reply
is expected.</dd>
<dt>&#8220;DATA&#8221; (DATA)</dt>
<dd>This field should contain the main body of any packet. It is
the only field that can contain special delimiting characters
without error.</dd>
</dl>
<p>The following headers are used internally by the inetd and should
not be used by external objects:
&#8220;HST&#8221; (HOST)</p>
<blockquote>
<div>The IP address of the host from which a request was received.
This is set by the receiving mud and is not contained in
outgoing packets.</div></blockquote>
<dl class="docutils">
<dt>&#8220;ID&#8221; (ID)</dt>
<dd>The packet id. This field is simply an integer which is set by
the sending inetd. The number is incremented each time a packet
is sent (zero is never used). This field is only needed if a
reply is expected. REPLY packets _must_ include the original
request id. This is _not_ done by the inetd.</dd>
<dt>&#8220;NAME&#8221; (NAME)</dt>
<dd>The name of the local mud. Used for security checking and to
update host list information.</dd>
<dt>&#8220;PKT&#8221; (PACKET)</dt>
<dd>A special header reserved for packets which have been split.
See PACKET PROTOCOL / FORMAT.</dd>
<dt>&#8220;UDP&#8221; (UDP_PORT)</dt>
<dd>The UDP port the local mud is receiving on. Used for security
checking and updating host list information.</dd>
<dt>&#8220;SYS&#8221; (SYSTEM)</dt>
<dd>Contains special system flags. The only system flag used at
present is TIME_OUT. This is included in packets returned due
to an expected reply timing out to differentiate it from an
actual reply.</dd>
</dl>
</div>
<div class="section" id="UDP REQUESTS / MODULES">
<span id="lpc.UDP REQUESTS / MODULES"></span><h3>UDP REQUESTS / MODULES<a class="headerlink" href="#UDP REQUESTS / MODULES" title="Permalink to this headline">¶</a></h3>
<p>The following are standard request types that must be supported
by all systems:
&#8220;ping&#8221; (PING)</p>
<blockquote>
<div>This module should return a REPLY packet that contains the
original requests ID in it&#8217;s ID field and the SENDER in it&#8217;s
RECIPIENT field. It should also include an appropriate string
in the DATA field, eg. &#8220;Mud-Name is alive.n&#8221;</div></blockquote>
<dl class="docutils">
<dt>&#8220;query&#8221; (QUERY)</dt>
<dd>This module expects the type of query requested to appear in the
recieved DATA field. It should return a REPLY packet containing
the original ID in the ID field, the SENDER in it&#8217;s RECIPIENT
field, and the query type in a QUERY field. The DATA field should
contain the information requested.</dd>
</dl>
<p>For details of how other intermud requests operate, look at the
relevant module code.</p>
</div>
<div class="section" id="AUTHOR">
<span id="lpc.AUTHOR"></span><h3>AUTHOR<a class="headerlink" href="#AUTHOR" title="Permalink to this headline">¶</a></h3>
<p>Information taken from Outerspaces documentation to be found
on <a class="reference external" href="http://mud.stack.nl/intermud/">http://mud.stack.nl/intermud/</a></p>
</div>
<h2 id="see2also">SEE ALSO<a class="headerlink" href="#DESCRIPTION" title="Permalink to this headline">¶</a></h2>
<p><span class="xref lpc lpc-concept">inetd</span>, <a class="reference internal" href="intermud.html#lpc.intermud" title="intermud"><span class="xref lpc lpc-concept">intermud</span></a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">intermud.basic</a><ul>
<li><a class="reference internal" href="#SYNOPSIS">SYNOPSIS</a></li>
<li><a class="reference internal" href="#DESCRIPTION">DESCRIPTION</a><ul>
<li><a class="reference internal" href="#ADVANCED PROTOCOL">ADVANCED PROTOCOL</a></li>
<li><a class="reference internal" href="#PACKET PROTOCOL / FORMAT">PACKET PROTOCOL / FORMAT</a></li>
<li><a class="reference internal" href="#PACKET ENCODING / DECODING">PACKET ENCODING / DECODING</a></li>
<li><a class="reference internal" href="#DEFINED SYSTEM HEADERS">DEFINED SYSTEM HEADERS</a></li>
<li><a class="reference internal" href="#UDP REQUESTS / MODULES">UDP REQUESTS / MODULES</a></li>
<li><a class="reference internal" href="#AUTHOR">AUTHOR</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hook/hook.html">hooks</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;good question.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../_sources/concepts/intermud.basic.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>