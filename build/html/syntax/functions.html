
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>functions &#8212; LDMud UNRELEASED documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'UNRELEASED',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="if" href="if.html" />
    <link rel="prev" title="foreach" href="foreach.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="functions">
<span id="lpc.syntax.functions"></span><div class="section" id="SYNTAX">
<h2>SYNTAX<a class="headerlink" href="#SYNTAX" title="Permalink to this headline">¶</a></h2>
<strong>Functions</strong><pre class="literal-block">
<strong>function declaration:
</strong>    [&lt;modifier&gt;...] [&lt;type&gt;] &lt;name&gt; ([&lt;argument&gt;...]);
<strong>
function definition:
</strong>    [&lt;modifier&gt;...] [&lt;type&gt;] &lt;name&gt; ([&lt;argument&gt;...]) {
      statements...
    }
</pre>
</div>
<div class="section" id="DESCRIPTION">
<h2>DESCRIPTION<a class="headerlink" href="#DESCRIPTION" title="Permalink to this headline">¶</a></h2>
<p>Functions are named blocks of code which are be called with a number of argument values, and which return a result value to the caller.</p>
<p>Functions are defined in an object and are also known as &#8220;local funs&#8221; or short &#8220;lfuns&#8221;.</p>
<div class="section" id="l">
<span id="p"></span><span id="c"></span><span id=":"></span><span id="s"></span><span id="u"></span><span id="b"></span><span id="t"></span><span id="o"></span><span id="p"></span><span id="i"></span><span id="c"></span><h3>Defining A Function<a class="headerlink" href="#l" title="Permalink to this headline">¶</a></h3>
<p>A function definition takes the form:</p>
<div class="highlight-pike"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">modifiers</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">type</span><span class="o">&gt;</span> <span class="n">name</span> <span class="p">(</span> <span class="o">&lt;</span><span class="n">arguments</span><span class="o">&gt;</span> <span class="p">)</span> <span class="p">{</span>
  <span class="n">statements</span><span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The parts in detail:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">&lt;modifiers&gt;</span></code></dt>
<dd>can be any one of &#8220;static&#8221;, &#8220;private&#8221;, &#8220;public&#8221; and &#8220;protected&#8221; (see <a class="reference internal" href="modifiers.html#lpc.syntax.modifiers" title="modifiers"><code class="xref lpc lpc-syntax docutils literal"><span class="pre">modifiers</span></code></a>), optionally combined with &#8220;varargs&#8221; (see <a class="reference internal" href="varargs.html#lpc.keyword.varargs" title="varargs"><code class="xref lpc lpc-keyword docutils literal"><span class="pre">varargs</span></code></a>) and/or &#8220;nomask&#8221;. If not specified, the function behaves as if it was specified as &#8220;public&#8221;, but this visibility can be restricted in derived object through non-public inheritance.</dd>
<dt><code class="docutils literal"><span class="pre">&lt;type&gt;</span></code></dt>
<dd>is the type of the result returned by the function. If specified as &#8220;void&#8221;, the function is compiled to return the value 0 under all circumstances. If not specified, the type is assumed to be &#8220;mixed&#8221;, furthermore typechecking is disabled for this function.</dd>
<dt><code class="docutils literal"><span class="pre">name</span></code></dt>
<dd>is the name of the function, e.g. &#8220;short&#8221;, or &#8220;Nice_Try&#8221;, under which it is made known.</dd>
<dt><code class="docutils literal"><span class="pre">&lt;arguments&gt;</span></code></dt>
<dd><p class="first">is a list of variable definitions in the normal <code class="docutils literal"><span class="pre">&lt;type&gt;</span> <span class="pre">&lt;name&gt;</span></code> style, separated by comma. Examples:</p>
<ul class="last simple">
<li><code class="docutils literal"><span class="pre">()</span></code> takes no arguments</li>
<li><code class="docutils literal"><span class="pre">(int</span> <span class="pre">a)</span></code> takes one integer argument</li>
<li><code class="docutils literal"><span class="pre">(mixed</span> <span class="pre">a,</span> <span class="pre">object</span> <span class="pre">*b)</span></code> takes two arguments, one arbitrary type, one array of objects</li>
</ul>
</dd>
<dt><code class="docutils literal"><span class="pre">{</span> <span class="pre">statements...</span> <span class="pre">}</span></code></dt>
<dd>defines the code for this function. This is a normal block (see <a class="reference internal" href="block.html#lpc.syntax.block" title="block"><code class="xref lpc lpc-syntax docutils literal"><span class="pre">block</span></code></a>) and as such can define its own local variables.</dd>
</dl>
</div>
<div class="section" id="l">
<span id="p"></span><span id="c"></span><span id=":"></span><span id="s"></span><span id="u"></span><span id="b"></span><span id="t"></span><span id="o"></span><span id="p"></span><span id="i"></span><span id="c"></span><h3>Declaring A Function<a class="headerlink" href="#l" title="Permalink to this headline">¶</a></h3>
<p>A function declaration makes the name and type of a function known to the compiler with the assertion that the code for this function will be provided &#8220;elsewhere&#8221;.</p>
<div class="container" id="lpc.syntax.[&lt;modifier&gt;...] [&lt;type&gt;] &lt;name&gt; ([&lt;argument&gt;...]);">
<div class="container" id="SYNTAX">
<strong>[&lt;modifier&gt;...] [&lt;type&gt;] &lt;name&gt; ([&lt;argument&gt;...]);: </strong><code class="docutils literal"><span class="pre">[&lt;modifier&gt;...]</span> <span class="pre">[&lt;type&gt;]</span> <span class="pre">&lt;name&gt;</span> <span class="pre">([&lt;argument&gt;...]);</span></code><div class="line-block">
</div>
</div>
</dt>
<dd id="DESCRIPTION"></dd>
</div>
<p>The form is:</p>
<div class="highlight-pike"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">modifiers</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">type</span><span class="o">&gt;</span> <span class="n">name</span> <span class="p">(</span> <span class="o">&lt;</span><span class="n">arguments</span><span class="o">&gt;</span> <span class="p">);</span>
</pre></div>
</div>
<p>Typical uses are:</p>
<ul class="simple">
<li>to declare in advance functions which are called before they can be defined; for example if the <a class="reference internal" href="../applied/create.html#lpc.applied.create" title="create"><code class="xref lpc lpc-applied docutils literal"><span class="pre">create</span></code>(A)</a> function of an object calls other functions which are defined after the <a class="reference internal" href="../applied/create.html#lpc.applied.create" title="create"><code class="xref lpc lpc-applied docutils literal"><span class="pre">create</span></code>(A)</a>.</li>
<li>to declare functions which will be provided by an inheriting object.</li>
</ul>
<p>Calling a declared but undefined function results in a runtime error.</p>
</div>
<div class="section" id="l">
<span id="p"></span><span id="c"></span><span id=":"></span><span id="s"></span><span id="u"></span><span id="b"></span><span id="t"></span><span id="o"></span><span id="p"></span><span id="i"></span><span id="c"></span><h3>Calling A Function<a class="headerlink" href="#l" title="Permalink to this headline">¶</a></h3>
<p>Functions in other objects are called with <a class="reference internal" href="../efun/call_other.html#lpc.efun.call_other" title="call_other"><code class="xref lpc lpc-efun docutils literal"><span class="pre">call_other</span></code>(E)</a>, which can be shortened to <code class="docutils literal"><span class="pre">-&gt;</span></code>:</p>
<div class="highlight-pike"><div class="highlight"><pre><span></span><span class="n">ob</span><span class="o">-&gt;</span><span class="n">fun</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="n">call_other</span><span class="p">(</span><span class="n">ob</span><span class="p">,</span> <span class="s">&quot;fun&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See the entry <a class="reference internal" href="../hook/default_method.html#lpc.hook.H_DEFAULT_METHOD" title="H_DEFAULT_METHOD"><code class="xref lpc lpc-hook docutils literal"><span class="pre">H_DEFAULT_METHOD</span></code>(H)</a> in <a class="reference internal" href="../hook/overview.html#lpc.overview.hook" title="hook"><code class="xref lpc lpc-overview docutils literal"><span class="pre">hook</span></code></a> for a modification of this behaviour.</p>
</div>
<p>Functions in the same object are called just by writing their name, followed by the arguments in parenthesis:</p>
<div class="highlight-pike"><div class="highlight"><pre><span></span><span class="kt">short</span><span class="p">()</span>
<span class="n">compute</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">do_that</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s">&quot;foo&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Array function arguments can be &#8216;flattened&#8217; with the &#8216;...&#8217; operator. For example:</p>
<div class="highlight-pike"><div class="highlight"><pre><span></span><span class="kt">mixed</span> <span class="o">*</span> <span class="n">m</span> <span class="o">=</span> <span class="p">({</span> <span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span> <span class="p">});</span>
<span class="n">fun</span><span class="p">(</span><span class="n">m</span><span class="p">...,</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<p>will be executed as:</p>
<div class="highlight-pike"><div class="highlight"><pre><span></span><span class="n">fun</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<p>If the number of values passed to the function does not match the number of expected arguments (and if type checking is not enabled), the driver will perform the necessary adaption at call time: excess values are ignored, missing values are substituted by the number 0. The values passed to the called function are massaged by the driver to match the argument list.</p>
</div>
<div class="section" id="l">
<span id="p"></span><span id="c"></span><span id=":"></span><span id="s"></span><span id="u"></span><span id="b"></span><span id="t"></span><span id="o"></span><span id="p"></span><span id="i"></span><span id="c"></span><h3>Functions And Inheritance<a class="headerlink" href="#l" title="Permalink to this headline">¶</a></h3>
<p>A &#8220;public&#8221; or &#8220;protected&#8221; (== &#8220;static&#8221;) function defined in one object is also visible in all inheriting objects. The exception from this rule is when an inheriting child redefines (&#8220;overloads&#8221;) the inherited function with its own. When compiling with type checking, the argument list of the redefined function has to match the original one.</p>
<p>When a function is called, the driver looks for the function first in the object called, and if not found there, then in the inherited objects.</p>
<p>To explicitely call an inherited function (useful when a redefining functions wants to use the original one), the <code class="docutils literal"><span class="pre">::</span></code> operator is used:</p>
<div class="highlight-pike"><div class="highlight"><pre><span></span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="o">::</span><span class="n">compute</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<p>The named function is searched only in the inherited objects, and the first found is used.</p>
<p>If the function is inherited from several objects and a specific one is to be called, the &#8221;::&#8221; can be extended to contain the partial or full name of the inherited object:</p>
<div class="highlight-pike"><div class="highlight"><pre><span></span><span class="n">inherit</span> <span class="s">&quot;/obj/cooker&quot;</span><span class="p">;</span>
<span class="n">inherit</span> <span class="s">&quot;/obj/container&quot;</span><span class="p">;</span>

<span class="n">tainer</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="n">container</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="s">&quot;tainer&quot;</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="s">&quot;container&quot;</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="s">&quot;obj/container&quot;</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="s">&quot;/obj/container&quot;</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
</pre></div>
</div>
<p>all of these call <code class="docutils literal"><span class="pre">create()</span></code> in the container inherit. Note that the name given to the <code class="docutils literal"><span class="pre">::</span></code> operator is matched against the ends of the inherited names.</p>
<p>One special form of this call is</p>
<div class="highlight-pike"><div class="highlight"><pre><span></span><span class="n">efun</span><span class="o">::</span><span class="n">find_object</span><span class="p">()</span>
</pre></div>
</div>
<p>which bypasses any redefinition of an efun (here <a class="reference internal" href="../efun/find_object.html#lpc.efun.find_object" title="find_object"><code class="xref lpc lpc-efun docutils literal"><span class="pre">find_object</span></code>(E)</a>) and directly calls the efun itself. This is only possible for efun-redefinitions which do not use the &#8220;nomask&#8221; modifier.</p>
<p>Additionally, a call to a function inherited from several objects can be instructed to call _all_ inherited functions through the use of the wildcards &#8220;*&#8221; (match any number of arbitrary characters) and &#8221;?&#8221; (match one arbitrary character)</p>
<div class="highlight-pike"><div class="highlight"><pre><span></span><span class="n">inherit</span> <span class="s">&quot;/obj/cooker&quot;</span><span class="p">;</span>
<span class="n">inherit</span> <span class="s">&quot;/obj/container&quot;</span><span class="p">;</span>

<span class="s">&quot;*&quot;</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="s">&quot;co*&quot;</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="s">&quot;*er&quot;</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
</pre></div>
</div>
<p>all of these call both inherited <code class="docutils literal"><span class="pre">create()</span></code> functions. The function called this way must not take arguments, and the single results from all calls are combined into one array used as final result. If there is no such function inherited at all, the statement will just return an empty array.</p>
</div>
<div class="section" id="see2also">
<h2>SEE ALSO<a class="headerlink" href="#see2also" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="types.html#lpc.topic.types" title="types"><code class="xref lpc lpc-topic docutils literal"><span class="pre">types</span></code></a>, <a class="reference internal" href="modifiers.html#lpc.syntax.modifiers" title="modifiers"><code class="xref lpc lpc-syntax docutils literal"><span class="pre">modifiers</span></code></a>, <a class="reference internal" href="varargs.html#lpc.keyword.varargs" title="varargs"><code class="xref lpc lpc-keyword docutils literal"><span class="pre">varargs</span></code></a>, <a class="reference internal" href="references.html#lpc.syntax.reference" title="reference"><code class="xref lpc lpc-syntax docutils literal"><span class="pre">reference</span></code></a>, <a class="reference internal" href="../efun/call_other.html#lpc.efun.call_other" title="call_other"><code class="xref lpc lpc-efun docutils literal"><span class="pre">call_other</span></code>(E)</a>, <a href="#id1"><span class="problematic" id="id2">:concept:`simul_efun`</span></a>, <a class="reference internal" href="../efun/call_out.html#lpc.efun.call_out" title="call_out"><code class="xref lpc lpc-efun docutils literal"><span class="pre">call_out</span></code>(E)</a></p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">functions</a><ul>
<li><a class="reference internal" href="#SYNTAX">SYNTAX</a></li>
<li><a class="reference internal" href="#DESCRIPTION">DESCRIPTION</a><ul>
<li><a class="reference internal" href="#l">Defining A Function</a></li>
<li><a class="reference internal" href="#l">Declaring A Function</a></li>
<li><a class="reference internal" href="#l">Calling A Function</a></li>
<li><a class="reference internal" href="#l">Functions And Inheritance</a></li>
<li><a class="reference internal" href="#see2also">SEE ALSO</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../admin/overview.html">Administrating an ldmud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applied/overview.html">Driver-applied methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../efun/overview.html">External functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hook/overview.html">Driver-supported hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internals/overview.html">Driver-internal docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../master/overview.html">Master-object methods</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="overview.html">LPC syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/overview.html">Other topics</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;good question.
      
      |
      <a href="../_sources/syntax/functions.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>