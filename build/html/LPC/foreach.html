<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>foreach &mdash; LDMud UNRELEASED documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'UNRELEASED',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="LDMud UNRELEASED documentation" href="../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="foreach">
<span id="lpc.foreach"></span><div class="section" id="SYNTAX">
<h2>SYNTAX<a class="headerlink" href="#SYNTAX" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c"><div class="highlight"><pre><span class="n">foreach</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">var</span><span class="o">&gt;</span> <span class="o">:</span> <span class="o">&lt;</span><span class="n">expr</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">statement</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">foreach</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">var</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">var2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...</span> <span class="p">,</span><span class="o">&lt;</span><span class="n">varN</span><span class="o">&gt;</span> <span class="o">:</span> <span class="o">&lt;</span><span class="n">expr</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">statement</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">foreach</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">var</span><span class="o">&gt;</span> <span class="o">:</span> <span class="o">&lt;</span><span class="n">expr1</span><span class="o">&gt;</span> <span class="p">..</span> <span class="o">&lt;</span><span class="n">expr2</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">statement</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">foreach</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">var</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">var2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...</span> <span class="p">,</span><span class="o">&lt;</span><span class="n">varN</span><span class="o">&gt;</span> <span class="o">:</span> <span class="o">&lt;</span><span class="n">expr1</span><span class="o">&gt;</span><span class="p">..</span><span class="o">&lt;</span><span class="n">expr2</span><span class="o">&gt;</span> <span class="p">)</span> <span class="o">&lt;</span><span class="n">statement</span><span class="o">&gt;</span><span class="p">;</span>
<span class="cm">/* MudOS compatibility only - not for new code: */</span>
<span class="n">foreach</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">var</span><span class="o">&gt;</span> <span class="n">in</span> <span class="o">&lt;</span><span class="n">expr</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">statement</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">foreach</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">var</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">var2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...</span> <span class="p">,</span><span class="o">&lt;</span><span class="n">varN</span><span class="o">&gt;</span> <span class="n">in</span> <span class="o">&lt;</span><span class="n">expr</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">&lt;</span><span class="n">statement</span><span class="o">&gt;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="DESCRIPTION">
<h2>DESCRIPTION<a class="headerlink" href="#DESCRIPTION" title="Permalink to this headline">¶</a></h2>
<p>The instruction evaluates its range specification - either a
simple &lt;expr&gt; which can yield an array, a struct, a string, a
mapping or an integer, or an integer range &lt;expr1&gt; through
&lt;expr2&gt; - and executes &lt;statement&gt; once for each value in the
range. The respective value is assigned to &lt;var&gt; right before
&lt;statement&gt; is executed.</p>
<p>A &#8216;break&#8217; in the &lt;statement&gt; will terminate the loop. A
&#8216;continue&#8217; will continue the execution from the beginning of
the loop.</p>
<p>Every &lt;var&gt; specification can declare a new local variable, whose
scope is the whole foreach() statement.</p>
<div class="section" id="The normal form (one &lt;expr&gt;):">
<span id="lpc.The normal form (one <expr>):"></span><h3>THE NORMAL FORM (ONE &lt;EXPR&gt;):<a class="headerlink" href="#The normal form (one <expr>):" title="Permalink to this headline">¶</a></h3>
<p>&lt;expr&gt; is evaluated and has to yield an array, a struct, a
string or a mapping (or reference to the former), or an
integer.</p>
<p>If &lt;expr&gt; is a array, struct, or string, the values of
&lt;expr&gt; (in case of the string, the integer values of the
characters) are then assigned one by one in order of
occurence to &lt;var&gt;, and &lt;statement&gt; is executed for every
assignment.</p>
<p>If &lt;expr&gt; is a mapping, the keys are assigned one by one
to &lt;var&gt;, and the values for each key are assigned in
order to &lt;var2&gt;..&lt;varN&gt;.  If there are more values than
variable, the extraneous values are ignored. Due to the
nature of mappings, a specific order of the keys can not
be guaranteed.</p>
<p>If &lt;expr&gt; evaluates to a reference to an array, mapping, or
string, the loop will assign references to the values into
the variables. This allows the loop body to change the contents
of the original data.</p>
<p>If &lt;expr&gt; evalutes to an integer, the loop will count up &lt;var&gt;
from 0 to &lt;expr&gt;-1, basically implementing a count loop.</p>
<p>If there are more variables than necessary, the unneeded ones
are not changed.</p>
</div>
<div class="section" id="The ranged form (&lt;expr1&gt; .. &lt;expr2&gt;):">
<span id="lpc.The ranged form (<expr1> .. <expr2>):"></span><h3>THE RANGED FORM (&lt;EXPR1&gt; .. &lt;EXPR2&gt;):<a class="headerlink" href="#The ranged form (<expr1> .. <expr2>):" title="Permalink to this headline">¶</a></h3>
<p>&lt;expr1&gt; and &lt;expr2&gt; are evaluated and must yield integers.
The loop will count up &lt;var&gt; from &lt;expr1&gt; to &lt;expr2&gt;, basically
implementing a counted loop.</p>
<p>If &lt;expr1&gt; is less than &lt;expr2&gt;, the loop will terminate at once.</p>
<p>If there are more than variable, the unneeded ones are not
changed.</p>
</div>
<div class="section" id="WHAT HAPPENS IF &lt;expr&gt; IS CHANGED IN THE LOOP?">
<span id="lpc.WHAT HAPPENS IF <expr> IS CHANGED IN THE LOOP?"></span><h3>WHAT HAPPENS IF &lt;EXPR&gt; IS CHANGED IN THE LOOP?<a class="headerlink" href="#WHAT HAPPENS IF <expr> IS CHANGED IN THE LOOP?" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>If &lt;expr&gt; yields an array or struct:</dt>
<dd><ul class="first last">
<li><p class="first">assignments to single elements or to array ranges effect
the values assigned to the variable:</p>
<blockquote>
<div><p>a = ({1, 2, 3})
foreach(x : a) { a[1..2] = ({4, 5}); write(x+&#8221; &#8221;); }</p>
</div></blockquote>
<p>will write (&#8220;1 4 5 &#8221;).</p>
</li>
<li><p class="first">operations which implicitely copy the array or struct (this
includes range assignments which change the size) don&#8217;t
have an effect on the loop.</p>
</li>
</ul>
</dd>
</dl>
<p>If &lt;expr&gt; yields a mapping, the loop will run over the indices
the mapping had at the begin of the loop. Deleted indices are silently
skipped, new indices ignored, but changes of the data of existing
indices are acknowledged.</p>
<p>If &lt;expr&gt; yields a string, the value used at the start of the loop
remains.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The additional syntax forms using &#8220;in&#8221; as keyword are meant
to make re-engineering of MudOS objects easier. Do not use them
for newly written code, as they may not be available in future.</p>
</div>
<h2 id="USAGE">USAGE<a class="headerlink" href="#DESCRIPTION" title="Permalink to this headline">¶</a></h2>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// Call quit() in all interactive users</span>
<span class="n">foreach</span><span class="p">(</span><span class="nl">o</span> <span class="p">:</span> <span class="n">users</span><span class="p">())</span> <span class="n">o</span><span class="o">-&gt;</span><span class="n">quit</span><span class="p">();</span>
<span class="n">foreach</span><span class="p">(</span><span class="n">object</span> <span class="nl">o</span> <span class="p">:</span> <span class="n">users</span><span class="p">())</span> <span class="n">o</span><span class="o">-&gt;</span><span class="n">quit</span><span class="p">();</span>

<span class="c1">// Print the contents of a mapping &lt;m&gt;</span>
<span class="n">foreach</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nl">value</span> <span class="p">:</span> <span class="n">m</span><span class="p">)</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%O:%O</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
<span class="n">foreach</span><span class="p">(</span><span class="n">mixed</span> <span class="n">key</span><span class="p">,</span> <span class="n">mixed</span> <span class="nl">value</span> <span class="p">:</span> <span class="n">m</span><span class="p">)</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%O:%O</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>

<span class="c1">// Don&#39;t change the content of a string: s remains &quot;FOOBAR&quot;.</span>
<span class="n">s</span> <span class="o">=</span> <span class="s">&quot;FOOBAR&quot;</span><span class="p">;</span>
<span class="n">foreach</span><span class="p">(</span><span class="nl">i</span> <span class="p">:</span> <span class="n">s</span><span class="p">)</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">32</span><span class="p">;</span>

<span class="c1">// Do change the content of a string: s will become &quot;foobar&quot;.</span>
<span class="n">s</span> <span class="o">=</span> <span class="s">&quot;FOOBAR&quot;</span><span class="p">;</span>
<span class="n">foreach</span><span class="p">(</span><span class="nl">i</span> <span class="p">:</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">)</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">32</span><span class="p">;</span>

<span class="c1">// Count from 0 to 5</span>
<span class="n">foreach</span><span class="p">(</span><span class="nl">i</span> <span class="p">:</span> <span class="mi">6</span><span class="p">)</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>

<span class="c1">// Count from 1 to 6</span>
<span class="n">foreach</span><span class="p">(</span><span class="nl">i</span> <span class="p">:</span> <span class="mi">1</span> <span class="p">..</span> <span class="mi">6</span><span class="p">)</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
</pre></div>
</div>
<h2 id="HISTORY">HISTORY<a class="headerlink" href="#DESCRIPTION" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>changed</strong> (<em>3.3.44</em>) &#8211; introduced the use of references, the loop over
an integer expression, and the loop over an integer range.</li>
<li><strong>changed</strong> (<em>3.3.266</em>) &#8211; added support for structs.</li>
</ul>
<h2 id="see2also">SEE ALSO<a class="headerlink" href="#DESCRIPTION" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="for.html#lpc.for" title="for"><span class="xref lpc lpc-lang">for</span>(LPC)</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">foreach</a><ul>
<li><a class="reference internal" href="#SYNTAX">SYNTAX</a></li>
<li><a class="reference internal" href="#DESCRIPTION">DESCRIPTION</a><ul>
<li><a class="reference internal" href="#The normal form (one &lt;expr&gt;):">THE NORMAL FORM (ONE &lt;EXPR&gt;):</a></li>
<li><a class="reference internal" href="#The ranged form (&lt;expr1&gt; .. &lt;expr2&gt;):">THE RANGED FORM (&lt;EXPR1&gt; .. &lt;EXPR2&gt;):</a></li>
<li><a class="reference internal" href="#WHAT HAPPENS IF &lt;expr&gt; IS CHANGED IN THE LOOP?">WHAT HAPPENS IF &lt;EXPR&gt; IS CHANGED IN THE LOOP?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hook/hook.html">hooks</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;good question.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../_sources/LPC/foreach.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>