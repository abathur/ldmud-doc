<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>functions &mdash; LDMud UNRELEASED documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'UNRELEASED',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="LDMud UNRELEASED documentation" href="../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="functions">
<div class="section" id="SYNOPSIS">
<h2>SYNOPSIS<a class="headerlink" href="#SYNOPSIS" title="Permalink to this headline">¶</a></h2>
<p id="lpc.functions">functions</p>
</div>
<div class="section" id="DESCRIPTION">
<h2>DESCRIPTION<a class="headerlink" href="#DESCRIPTION" title="Permalink to this headline">¶</a></h2>
<p>Functions are named blocks of code which are be called with
a number of argument values, and which return a result value
to the caller.</p>
<p>Functions are defined in an object and are also known as
&#8220;local funs&#8221; or short &#8220;lfuns&#8221;.</p>
<div class="section" id="DEFINING A FUNCTION">
<span id="lpc.DEFINING A FUNCTION"></span><h3>DEFINING A FUNCTION<a class="headerlink" href="#DEFINING A FUNCTION" title="Permalink to this headline">¶</a></h3>
<p>A function definition takes the form:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="o">&lt;</span><span class="n">modifiers</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">type</span><span class="o">&gt;</span> <span class="n">name</span> <span class="p">(</span> <span class="o">&lt;</span><span class="n">arguments</span><span class="o">&gt;</span> <span class="p">)</span> <span class="p">{</span>
   <span class="n">statements</span><span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The parts in detail:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">&lt;modifiers&gt;</span></code></dt>
<dd>can be any one of &#8220;static&#8221;, &#8220;private&#8221;, &#8220;public&#8221;
and &#8220;protected&#8221; (see <span class="xref lpc lpc-lang">modifiers</span>), optionally combined
with &#8220;varargs&#8221; (see <span class="xref lpc lpc-lang">varargs</span>) and/or &#8220;nomask&#8221;.
If not specified, the function behaves as if it was
specified as &#8220;public&#8221;, but this visibility can be restricted
in derived object through non-public inheritance.</dd>
<dt><code class="docutils literal"><span class="pre">&lt;type&gt;</span></code></dt>
<dd>is the type of the result returned by the function.
If specified as &#8220;void&#8221;, the function is compiled to return
the value 0 under all circumstances. If not specified, the
type is assumed to be &#8220;mixed&#8221;, furthermore typechecking is
disabled for this function.</dd>
<dt><code class="docutils literal"><span class="pre">name</span></code></dt>
<dd>is the name of the function, e.g. &#8220;short&#8221;, or &#8220;Nice_Try&#8221;,
under which it is made known.</dd>
<dt><code class="docutils literal"><span class="pre">&lt;arguments&gt;</span></code></dt>
<dd><p class="first">is a list of variable definitions in the
normal <code class="docutils literal"><span class="pre">&lt;type&gt;</span> <span class="pre">&lt;name&gt;</span></code> style, separated by comma. Examples:</p>
<ul class="last simple">
<li><code class="docutils literal"><span class="pre">()</span></code> takes no arguments</li>
<li><code class="docutils literal"><span class="pre">(int</span> <span class="pre">a)</span></code> takes one integer argument</li>
<li><code class="docutils literal"><span class="pre">(mixed</span> <span class="pre">a,</span> <span class="pre">object</span> <span class="pre">*b)</span></code> takes two arguments, one
arbitrary type, one array of objects</li>
</ul>
</dd>
<dt><code class="docutils literal"><span class="pre">{</span> <span class="pre">statements...</span> <span class="pre">}</span></code></dt>
<dd>defines the code for this function. This
is a normal block (see <a class="reference internal" href="block.html#lpc.block" title="block"><span class="xref lpc lpc-lang">block</span>(LPC)</a>) and as such can define
its own local variables.</dd>
</dl>
</div>
<div class="section" id="DECLARING A FUNCTION">
<span id="lpc.DECLARING A FUNCTION"></span><h3>DECLARING A FUNCTION<a class="headerlink" href="#DECLARING A FUNCTION" title="Permalink to this headline">¶</a></h3>
<p>A function declaration makes the name and type of a function known
to the compiler with the assertion that the code for this function
will be provided &#8220;elsewhere&#8221;.</p>
<p>The form is:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="o">&lt;</span><span class="n">modifiers</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">type</span><span class="o">&gt;</span> <span class="n">name</span> <span class="p">(</span> <span class="o">&lt;</span><span class="n">arguments</span><span class="o">&gt;</span> <span class="p">);</span>
</pre></div>
</div>
<p>Typical uses are:
- to declare in advance functions which are called before they</p>
<blockquote>
<div>can be defined; for example if the create() function of an object
calls other functions which are defined after the create().</div></blockquote>
<ul class="simple">
<li>to declare functions which will be provided by an inheriting
object.</li>
</ul>
<p>Calling a declared but undefined function results in a runtime error.</p>
</div>
<div class="section" id="CALLING A FUNCTION">
<span id="lpc.CALLING A FUNCTION"></span><h3>CALLING A FUNCTION<a class="headerlink" href="#CALLING A FUNCTION" title="Permalink to this headline">¶</a></h3>
<p>Functions in other objects are called with the call_other() efun,
which can be shortened to <code class="docutils literal"><span class="pre">-&gt;</span></code>:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">ob</span><span class="o">-&gt;</span><span class="n">fun</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="n">call_other</span><span class="p">(</span><span class="n">ob</span><span class="p">,</span> <span class="s">&quot;fun&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See the entry H_DEFAULT_METHOD in <a class="reference internal" href="../hook/hook.html#lpc.hooks" title="hooks"><span class="xref lpc lpc-concept">hooks</span></a> for a modification
of this behaviour.</p>
</div>
<p>Functions in the same object are called just by writing their name,
followed by the arguments in parenthesis:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">short</span><span class="p">()</span>
<span class="n">compute</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">do_that</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s">&quot;foo&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Array function arguments can be &#8216;flattened&#8217; with the &#8216;...&#8217; operator.
For example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">mixed</span> <span class="o">*</span> <span class="n">m</span> <span class="o">=</span> <span class="p">({</span> <span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span> <span class="p">});</span>
<span class="n">fun</span><span class="p">(</span><span class="n">m</span><span class="p">...,</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<p>will be executed as:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">fun</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</pre></div>
</div>
<p>If the number of values passed to the function does not match the
number of expected arguments (and if type checking is not enabled), the
driver will perform the necessary adaption at call time: excess
values are ignored, missing values are substituted by the number 0.
The values passed to the called function are massaged by the driver
to match the argument list.</p>
</div>
<div class="section" id="FUNCTIONS AND INHERITANCE">
<span id="lpc.FUNCTIONS AND INHERITANCE"></span><h3>FUNCTIONS AND INHERITANCE<a class="headerlink" href="#FUNCTIONS AND INHERITANCE" title="Permalink to this headline">¶</a></h3>
<p>A &#8220;public&#8221; or &#8220;protected&#8221; (== &#8220;static&#8221;) function defined in one
object is also visible in all inheriting objects. The exception from
this rule is when an inheriting child redefines (&#8220;overloads&#8221;) the
inherited function with its own. When compiling with type checking,
the argument list of the redefined function has to match the
original one.</p>
<p>When a function is called, the driver looks for the function first
in the object called, and if not found there, then in the inherited
objects.</p>
<p>To explicitely call an inherited function (useful when a redefining
functions wants to use the original one), the <code class="docutils literal"><span class="pre">::</span></code> operator is used:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="o">::</span><span class="n">compute</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<p>The named function is searched only in the inherited objects, and
the first found is used.</p>
<p>If the function is inherited from several objects and a specific
one is to be called, the &#8221;::&#8221; can be extended to contain the
partial or full name of the inherited object:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">inherit</span> <span class="s">&quot;/obj/cooker&quot;</span><span class="p">;</span>
<span class="n">inherit</span> <span class="s">&quot;/obj/container&quot;</span><span class="p">;</span>

<span class="n">tainer</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="n">container</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="s">&quot;tainer&quot;</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="s">&quot;container&quot;</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="s">&quot;obj/container&quot;</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="s">&quot;/obj/container&quot;</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
</pre></div>
</div>
<p>all call the create() in the container inherit. Note that the
name given to the <code class="docutils literal"><span class="pre">::</span></code> operator is matched against the ends of
the inherited names.</p>
<p>One special form of this call is</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">efun</span><span class="o">::</span><span class="n">find_object</span><span class="p">()</span>
</pre></div>
</div>
<p>which bypasses any redefinition of an efun (here find_object())
and directly calls the efun itself. This is only possible for
efun-redefinitions which do not use the &#8220;nomask&#8221; modifier.</p>
<p>Additionally, a call to a function inherited from several objects
can be instructed to call _all_ inherited functions through the
use of the wildcards &#8220;*&#8221; (match any number of arbitrary characters)
and &#8221;?&#8221; (match one arbitrary character)</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">inherit</span> <span class="s">&quot;/obj/cooker&quot;</span><span class="p">;</span>
<span class="n">inherit</span> <span class="s">&quot;/obj/container&quot;</span><span class="p">;</span>

<span class="s">&quot;*&quot;</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="s">&quot;co*&quot;</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
<span class="s">&quot;*er&quot;</span><span class="o">::</span><span class="n">create</span><span class="p">()</span>
</pre></div>
</div>
<p>all call both inherited create()s. The function called this way
must not take arguments, and the single results from all calls are
combined into one array used as final result. If there is no such
function inherited at all, the statement will just return
an empty array.</p>
</div>
<h2 id="see2also">SEE ALSO<a class="headerlink" href="#DESCRIPTION" title="Permalink to this headline">¶</a></h2>
<p><span class="xref lpc lpc-lang">types</span>, <span class="xref lpc lpc-lang">modifiers</span>, <span class="xref lpc lpc-lang">varargs</span>, <span class="xref lpc lpc-lang">references</span>, <a class="reference internal" href="../efun/call_other.html#lpc.call_other" title="call_other"><code class="xref lpc lpc-efun docutils literal"><span class="pre">call_other</span></code>(E)</a>, <a class="reference internal" href="../concepts/simul_efun.html#lpc.simul_efun" title="simul_efun"><span class="xref lpc lpc-concept">simul_efun</span></a>, <a class="reference internal" href="../efun/call_out.html#lpc.call_out" title="call_out"><code class="xref lpc lpc-efun docutils literal"><span class="pre">call_out</span></code>(E)</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">functions</a><ul>
<li><a class="reference internal" href="#SYNOPSIS">SYNOPSIS</a></li>
<li><a class="reference internal" href="#DESCRIPTION">DESCRIPTION</a><ul>
<li><a class="reference internal" href="#DEFINING A FUNCTION">DEFINING A FUNCTION</a></li>
<li><a class="reference internal" href="#DECLARING A FUNCTION">DECLARING A FUNCTION</a></li>
<li><a class="reference internal" href="#CALLING A FUNCTION">CALLING A FUNCTION</a></li>
<li><a class="reference internal" href="#FUNCTIONS AND INHERITANCE">FUNCTIONS AND INHERITANCE</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hook/hook.html">hooks</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;good question.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../_sources/LPC/functions.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>