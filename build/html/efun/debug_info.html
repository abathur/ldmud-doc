<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>debug_info &mdash; LDMud UNRELEASED documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'UNRELEASED',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="LDMud UNRELEASED documentation" href="../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <dl class="docutils">
<dt>SYNOPSIS</dt>
<dd>#include &lt;debug_info.h&gt;</dd>
</dl>
<div class="section" id="debug_info">
<div class="section" id="SYNOPSIS">
<h2>SYNOPSIS<a class="headerlink" href="#SYNOPSIS" title="Permalink to this headline">¶</a></h2>
<dl class="efun">
<dl class="include">
<dt>
#include &lt;debug_info.h&gt;</dt>
</dl>

<dt id="lpc.debug_info">
mixed <code class="descname">debug_info</code><span class="sig-paren">(</span>int<em>&nbsp;flag</em><span class="sig-paren">)</span><a class="headerlink" href="#lpc.debug_info" title="Permalink to this definition">¶</a></dt>
<dt>
mixed <code class="descname">debug_info</code><span class="sig-paren">(</span>int<em>&nbsp;flag</em>, mixed<em>&nbsp;arg</em><span class="sig-paren">)</span></dt>
<dt>
mixed <code class="descname">debug_info</code><span class="sig-paren">(</span>int<em>&nbsp;flag</em>, mixed<em>&nbsp;arg2</em>, mixed<em>&nbsp;arg3</em><span class="sig-paren">)</span></dt>
</dl>

</div>
<div class="section" id="DESCRIPTION">
<h2>DESCRIPTION<a class="headerlink" href="#DESCRIPTION" title="Permalink to this headline">¶</a></h2>
<p>Gather some driver internal debug information according
to the setting of flag:</p>
<dl class="docutils">
<dt>DINFO_OBJECT (0): Information like heart_beat, enable_commands</dt>
<dd>etc. of the specified object will be printed, and 0 returned.</dd>
<dt>DINFO_MEMORY (1): Memory usage information like how many strings,</dt>
<dd>variables, inherited files, object size etc. will be printed
about the specified object, and 0 returned.</dd>
<dt>DINFO_OBJLIST (2): Objects from the global object list are</dt>
<dd>returned.  If the optional second arg is omitted, the first
element (numbered 0) is returned. If the second arg is a
number n, the n&#8217;th element of the object list returned. If the
second arg is an object, it&#8217;s successor in the object list is
returned.  If the optional &lt;arg2&gt; is omitted, the first
element(s) (numbered 0) is returned. If the &lt;arg2&gt; is a
number n, the n&#8217;th element(s) of the object list returned. If the
&lt;arg2&gt; is an object, it&#8217;s successor(s) in the object list is
The optional &lt;arg3&gt; specifies the maximum number of objects
returned. If it&#8217;s 0, a single object is returned. If it is
a positive number m, an array with at max &#8216;m&#8217; objects is
returned. This way, by passing __INT_MAX__ as &lt;arg3&gt; it is
possible to create an array of all objects in the game
(given a suitable maximum array size).</dd>
<dt>DINFO_MALLOC (3): Equivalent to typing <a href="#id1"><span class="problematic" id="id2">``</span></a>malloc&#8217;&#8217; at the command</dt>
<dd>line. No second arg must be given. Returns 0.</dd>
<dt>DINFO_STATUS (4): Collect the status information of the driver.</dt>
<dd>The optional second arg can be 0, &#8220;tables&#8221;, &#8220;swap&#8221;, &#8220;malloc&#8221;,
&#8220;malloc extstats&#8221; or any other argument accepted by the actual
driver.  The result is a printable string with the status
information, or 0 if an invalid argument was given.</dd>
<dt>DINFO_DUMP (5): Dump the information specified by &lt;arg2&gt; into the</dt>
<dd><p class="first">filename specified by &lt;arg3&gt;. If &lt;arg3&gt; is omitted, a default
file name is used. The function calls master-&gt;valid_write() to
check that it can write the files. The file in question is
always written anew.</p>
<p>Result is 1 on success, or 0 if an error occured.</p>
<dl class="last docutils">
<dt>&lt;arg2&gt; == &#8220;objects&#8221;: dump information about all live objects.</dt>
<dd><blockquote class="first">
<div><p>Default filename is &#8216;/OBJ_DUMP&#8217;, the valid_write() will read
&#8216;objdump&#8217; for the function.</p>
<p>For every object, a line is written into the file with the
following information in the given order:</p>
<blockquote>
<div><ul>
<li><p class="first">object name</p>
</li>
<li><p class="first">size in memory, shared data counted only once</p>
</li>
<li><p class="first">size in memory if data wouldn&#8217;t be shared</p>
</li>
<li><p class="first">number of references</p>
</li>
<li><p class="first">&#8216;HB&#8217; if the object has a heartbeat, nothing if not.</p>
</li>
<li><p class="first">the name of the environment, or &#8216;&#8211;&#8217; if the object has no
environment</p>
</li>
<li><p class="first">in parentheses the number of execution ticks spent in this
object</p>
</li>
<li><dl class="first docutils">
<dt>the swap status:</dt>
<dd><p class="first last">nothing if not swapped,
&#8216;PROG SWAPPED&#8217; if only the program is swapped
&#8216;VAR SWAPPED&#8217; if only the variabes are swapped
&#8216;SWAPPED&#8217; if both program and variables are swapped</p>
</dd>
</dl>
</li>
<li><p class="first">the time the object was created</p>
</li>
</ul>
</div></blockquote>
</div></blockquote>
<dl class="last docutils">
<dt>&lt;arg2&gt; == &#8220;destructed&#8221;: dump information about all destructed</dt>
<dd><blockquote class="first">
<div>objects.  Default filename is &#8216;/DEST_OBJ_DUMP&#8217;, the
valid_write() will read &#8216;objdump&#8217; for the function.</div></blockquote>
<p>For every object, a line is written into the file with the
following information in the given order:</p>
<blockquote class="last">
<div><ul class="simple">
<li>object name</li>
<li>number of references</li>
<li>&#8216;NEW&#8217; if the object was destructed in this executiong
thread, nothing if it is older already.</li>
</ul>
</div></blockquote>
</dd>
</dl>
</dd>
<dt>&lt;arg2&gt; == &#8220;opcodes&#8221;: dump usage information about the opcodes.</dt>
<dd>Default filename is &#8216;/OPC_DUMP&#8217;, the valid_write() will read
&#8216;opcdump&#8217; for the function.</dd>
<dt>&lt;arg2&gt; == &#8220;memory&#8221;: dump a list of all allocated memory</dt>
<dd><p class="first">blocks (if the allocator supports this).
Default filename is &#8216;/MEMORY_DUMP&#8217;, the valid_write()
will read &#8216;memdump&#8217; for the function, and the new data
will be appended to the end of the file.</p>
<p>If the allocator doesn&#8217;t support memory dumps, this call will
always return 0, and nothing will be written.</p>
<p>This works best if the allocator is compiled with
MALLOC_TRACE and/or MALLOC_LPC_TRACE.</p>
<p class="last">NOTE: Make sure that this option can&#8217;t be abused!</p>
</dd>
</dl>
</dd>
<dt>DINFO_DATA (6): Return raw information about an aspect of</dt>
<dd><p class="first">the driver specified by &lt;arg2&gt;. The result of the function
is an array with the information, or 0 for unsupported values
of &lt;arg2&gt;.</p>
<p>If &lt;arg3&gt; is given and in the range of array indices
for the given &lt;arg2&gt;, the result will be just the indexed array
entry, but not the full array.</p>
<p>Allowed values for &lt;arg2&gt; are: DID_STATUS, DID_SWAP, DID_MALLOC.</p>
<p>&lt;arg2&gt; == DID_STATUS (0): Returns the &#8220;status&#8221; and &#8220;status tables&#8221;
information. Following indices are defined:</p>
<blockquote>
<div><dl class="docutils">
<dt>int DID_ST_BOOT_TIME</dt>
<dd>The time() when the mud was started.</dd>
</dl>
<p>int DID_ST_ACTIONS
int DID_ST_ACTIONS_SIZE</p>
<blockquote>
<div>Number and size of allocated actions.</div></blockquote>
<p>int DID_ST_SHADOWS
int DID_ST_SHADOWS_SIZE</p>
<blockquote>
<div>Number and size of allocated shadows.</div></blockquote>
<p>int DID_ST_OBJECTS
int DID_ST_OBJECTS_SIZE</p>
<blockquote>
<div>Total number and size of objects.</div></blockquote>
<p>int DID_ST_OBJECTS_SWAPPED
int DID_ST_OBJECTS_SWAP_SIZE</p>
<blockquote>
<div>Number and size of swapped-out object variable blocks.</div></blockquote>
<dl class="docutils">
<dt>int DID_ST_OBJECTS_LIST</dt>
<dd>Number of objects in the object list.</dd>
<dt>int DID_ST_OBJECTS_NEWLY_DEST</dt>
<dd>Number of newly destructed objects (ie. objects destructed
in this execution thread).</dd>
<dt>int DID_ST_OBJECTS_DESTRUCTED</dt>
<dd>Number of destructed but still referenced objects, not
counting the DID_ST_OBJECTS_NEWLY_DEST.</dd>
<dt>int DID_ST_OBJECTS_PROCESSED</dt>
<dd>Number of listed objects processed in the last backend
cycle.</dd>
<dt>float DID_ST_OBJECTS_AVG_PROC</dt>
<dd>Average number of objects processed each cycle, expressed
as percentage (0..1.0).</dd>
<dt>int DID_ST_OTABLE</dt>
<dd>Number of objects listed in the object table.</dd>
<dt>int DID_ST_OTABLE_SLOTS</dt>
<dd>Number of hash slots provided by the object table.</dd>
<dt>int DID_ST_OTABLE_SIZE</dt>
<dd>Size occupied by the object table.</dd>
<dt>int DID_ST_HBEAT_OBJS</dt>
<dd>Number of objects with a heartbeat.</dd>
<dt>int DID_ST_HBEAT_CALLS</dt>
<dd>Number of active heart_beat cycles executed so far
(ie. cycles in which at least one heart_beat() function
was called).</dd>
<dt>int DID_ST_HBEAT_CALLS_TOTAL</dt>
<dd>Total number of heart_beats cycles so far.</dd>
</dl>
<p>int DID_ST_HBEAT_SLOTS
int DID_ST_HBEAT_SIZE</p>
<blockquote>
<div>Number of allocated entries in the heart_beat table
and its size.</div></blockquote>
<dl class="docutils">
<dt>int DID_ST_HBEAT_PROCESSED</dt>
<dd>Number of heart_beats called in the last backend cycle.</dd>
<dt>float DID_ST_HBEAT_AVG_PROC</dt>
<dd>Average number of heart_beats called each cycle, expressed
as fraction (0..1.0).</dd>
</dl>
<p>int DID_ST_CALLOUTS
int DID_ST_CALLOUT_SIZE</p>
<blockquote>
<div>Number and total size of pending call_outs.</div></blockquote>
<p>int DID_ST_ARRAYS
int DID_ST_ARRAYS_SIZE</p>
<blockquote>
<div>Number and size of all arrays.</div></blockquote>
<p>int DID_ST_MAPPINGS
int DID_ST_MAPPINGS_SIZE</p>
<blockquote>
<div>Number and size of all mappings.</div></blockquote>
<p>int DID_ST_HYBRID_MAPPINGS
int DID_ST_HASH_MAPPINGS</p>
<blockquote>
<div>Number of hybrid (hash+condensed) and hash mappings.</div></blockquote>
<p>int DID_ST_STRUCTS
int DID_ST_STRUCTS_SIZE</p>
<blockquote>
<div>Number and size of all struct instances.</div></blockquote>
<p>int DID_ST_STRUCT_TYPES
int DID_ST_STRUCT_TYPES_SIZE</p>
<blockquote>
<div>Number and size of all struct type instances.</div></blockquote>
<p>int DID_ST_PROGS
int DID_ST_PROGS_SIZE</p>
<blockquote>
<div>Number and size of all programs.</div></blockquote>
<p>int DID_ST_PROGS_SWAPPED
int DID_ST_PROGS_SWAP_SIZE</p>
<blockquote>
<div>Number and size of swapped-out programs.</div></blockquote>
<p>int DID_ST_USER_RESERVE
int DID_ST_MASTER_RESERVE
int DID_ST_SYSTEM_RESERVE</p>
<blockquote>
<div>Current sizes of the three memory reserves.</div></blockquote>
<p>int DID_ST_ADD_MESSAGE
int DID_ST_PACKETS
int DID_ST_PACKET_SIZE</p>
<blockquote>
<div>Number of calls to add_message(), number and total size
of sent packets.
If the driver is not compiled with COMM_STAT, all three
values are returned as -1.</div></blockquote>
<p>int DID_ST_PACKETS_IN
int DID_ST_PACKET_SIZE_IN</p>
<blockquote>
<div>Number and total size of received packets.
If the driver is not compiled with COMM_STAT, all three
values are returned as -1.</div></blockquote>
<p>int DID_ST_APPLY
int DID_ST_APPLY_HITS</p>
<blockquote>
<div>Number of calls to apply_low(), and how many of these
were cache hits.
If the driver is not compiled with APPLY_CACHE_STAT, all two
values are returned as -1.</div></blockquote>
<p>int DID_ST_STRINGS
int DID_ST_STRING_SIZE</p>
<blockquote>
<div>Total number and size of string requests.</div></blockquote>
<dl class="docutils">
<dt>int DID_ST_STR_TABLE_SIZE</dt>
<dd>Size of the string table structure itself.</dd>
<dt>int DID_ST_STR_OVERHEAD</dt>
<dd>Size of the overhead per string.</dd>
</dl>
<p>int DID_ST_UNTABLED
int DID_ST_UNTABLED_SIZE</p>
<blockquote>
<div>Total number and size of existing untabled strings.</div></blockquote>
<p>int DID_ST_TABLED
int DID_ST_TABLED_SIZE</p>
<blockquote>
<div>Total number and size of existing directly tabled strings.</div></blockquote>
<dl class="docutils">
<dt>int DID_ST_STR_CHAINS</dt>
<dd>Number of hash chains in the string table.</dd>
<dt>int DID_ST_STR_ADDED</dt>
<dd>Number of distinct strings added to the table so far.</dd>
<dt>int DID_ST_STR_DELETED</dt>
<dd>Number of distinct strings removed from the table so far.</dd>
<dt>int DID_ST_STR_COLLISIONS</dt>
<dd>Number of distinct strings added to an existing hash chain
so far.</dd>
</dl>
<p>int DID_ST_STR_SEARCHES
int DID_ST_STR_SEARCHLEN</p>
<blockquote>
<div>Number and accumulated length of string searches by address.</div></blockquote>
<p>int DID_ST_STR_SEARCHES_BYVALUE
int DID_ST_STR_SEARCHLEN_BYVALUE</p>
<blockquote>
<div>Number and accumulated length of string searches by value.</div></blockquote>
<p>int DID_ST_STR_FOUND
int DID_ST_STR_FOUND_BYVALUE</p>
<blockquote>
<div>Number of successful searches by address resp. by value.</div></blockquote>
<dl class="docutils">
<dt>int DID_ST_RX_CACHED</dt>
<dd>Number of regular expressions cached.</dd>
</dl>
<p>int DID_ST_RX_TABLE
int DID_ST_RX_TABLE_SIZE</p>
<blockquote>
<div>Number of slots in the regexp cache table, and size of the
memory currently held by it and the cached expressions.</div></blockquote>
<dl class="docutils">
<dt>int DID_ST_RX_REQUESTS</dt>
<dd>Number of requests for new regexps.</dd>
<dt>int DID_ST_RX_REQ_FOUND</dt>
<dd>Number of requested regexps found in the table.</dd>
<dt>int DID_ST_RX_REQ_COLL</dt>
<dd>Number of requested new regexps which collided with
a cached one.</dd>
<dt>int DID_ST_MB_FILE</dt>
<dd>The size of the &#8216;File&#8217; memory buffer.</dd>
<dt>int DID_ST_MB_SWAP</dt>
<dd>The size of the &#8216;Swap&#8217; memory buffer.</dd>
</dl>
</div></blockquote>
<p>&lt;arg2&gt; == DID_SWAP (1): Returns the &#8220;status swap&#8221; information:</p>
<blockquote>
<div><p>int DID_SW_PROGS
int DID_SW_PROG_SIZE</p>
<blockquote>
<div>Number and size of swapped-out program blocks.</div></blockquote>
<p>int DID_SW_PROG_UNSWAPPED
int DID_SW_PROG_U_SIZE</p>
<blockquote>
<div>Number and size of unswapped program blocks.</div></blockquote>
<p>int DID_SW_VARS
int DID_SW_VAR_SIZE</p>
<blockquote>
<div>Number and size of swapped-out variable blocks.</div></blockquote>
<p>int DID_SW_FREE
int DID_SW_FREE_SIZE</p>
<blockquote>
<div>Number and size of free blocks in the swap file.</div></blockquote>
<dl class="docutils">
<dt>int DID_SW_FILE_SIZE</dt>
<dd>Size of the swap file.</dd>
<dt>int DID_SW_REUSED</dt>
<dd>Total reused space in the swap file.</dd>
</dl>
<p>int DID_SW_SEARCHES
int DID_SW_SEARCH_LEN</p>
<blockquote>
<div>Number and total length of searches for block to reuse
in the swap file.</div></blockquote>
<p>int DID_SW_F_SEARCHES
int DID_SW_F_SEARCH_LEN</p>
<blockquote>
<div>Number and total length of searches for a block to free.</div></blockquote>
<dl class="docutils">
<dt>int DID_SW_COMPACT</dt>
<dd>TRUE if the swapper is running in compact mode.</dd>
<dt>int DID_SW_RECYCLE_FREE</dt>
<dd>TRUE if the swapper is currently recycling free block.</dd>
</dl>
</div></blockquote>
<p>&lt;arg2&gt; == DID_MEMORY (2): Returns the &#8220;status malloc&#8221; information:</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>string DID_MEM_NAME</dt>
<dd>The name of the allocator: &#8220;sysmalloc&#8221;, &#8220;smalloc&#8221;,
&#8220;slaballoc&#8221;</dd>
</dl>
<p>int DID_MEM_SBRK          (slaballoc, smalloc)
int DID_MEM_SBRK_SIZE     (slaballoc, smalloc)</p>
<blockquote>
<div>Number and size of memory blocks requested from the
operating system (non-mmapped memory).</div></blockquote>
<p>int DID_MEM_LARGE         (slaballoc, smalloc)
int DID_MEM_LARGE_SIZE    (slaballoc, smalloc)
int DID_MEM_LFREE         (slaballoc, smalloc)
int DID_MEM_LFREE_SIZE    (slaballoc, smalloc)</p>
<blockquote>
<div>Number and size of large allocated resp. free blocks.
smalloc: The large allocated blocks include the
small chunk blocks.</div></blockquote>
<p>int DID_MEM_LWASTED       (slaballoc, smalloc)
int DID_MEM_LWASTED_SIZE  (slaballoc, smalloc)</p>
<blockquote>
<div>Number and size of unusable large memory fragments.</div></blockquote>
<p>int DID_MEM_CHUNK         (smalloc)
int DID_MEM_CHUNK_SIZE    (smalloc)</p>
<blockquote>
<div>Number and size of small chunk blocks.</div></blockquote>
<p>int DID_MEM_SLAB          (slaballoc)
int DID_MEM_SLAB_SIZE     (slaballoc)</p>
<blockquote>
<div>Number and size of slabs (including fully free slabs).</div></blockquote>
<p>int DID_MEM_SLAB_FREE      (slaballoc)
int DID_MEM_SLAB_FREE_SIZE (slaballoc)</p>
<blockquote>
<div>Number and size of free slabs (part of DID_MEM_SLAB).</div></blockquote>
<p>int DID_MEM_SMALL         (slaballoc, smalloc)
int DID_MEM_SMALL_SIZE    (slaballoc, smalloc)
int DID_MEM_SFREE         (slaballoc, smalloc)
int DID_MEM_SFREE_SIZE    (slaballoc, smalloc)</p>
<blockquote>
<div>Number and size of small allocated resp. free blocks.</div></blockquote>
<p>int DID_MEM_SWASTED       (smalloc)
int DID_MEM_SWASTED_SIZE  (smalloc)</p>
<blockquote>
<div>Number and size of unusably small memory fragments.</div></blockquote>
<dl class="docutils">
<dt>int DID_MEM_SMALL_OVERHEAD_SIZE  (slaballoc)</dt>
<dd>Size of the slab management overhead (not including
the overhead incurred by each allocated small block).</dd>
</dl>
<p>int DID_MEM_MINC_CALLS    (slaballoc, smalloc)
int DID_MEM_MINC_SUCCESS  (slaballoc, smalloc)
int DID_MEM_MINC_SIZE     (slaballoc, smalloc)</p>
<blockquote>
<div>Number of calls to malloc_increment(), the number
of successes and the size of memory allocated this
way.</div></blockquote>
<p>int DID_MEM_PERM         (slaballoc, smalloc)
int DID_MEM_PERM_SIZE    (slaballoc, smalloc)</p>
<blockquote>
<div>Number and size of permanent (non-GCable) allocations.</div></blockquote>
<p>int DID_MEM_CLIB         (slaballoc, smalloc)
int DID_MEM_CLIB_SIZE    (slaballoc, smalloc)</p>
<blockquote>
<div>Number and size of allocations done through the
clib functions (if supported by the allocator).</div></blockquote>
<dl class="docutils">
<dt>int DID_MEM_OVERHEAD     (slaballoc, smalloc)</dt>
<dd>Overhead for every allocation.</dd>
<dt>int DID_MEM_ALLOCATED    (slaballoc, smalloc)</dt>
<dd>The amount of memory currently allocated from the
allocator, including the overhead for the allocator.</dd>
<dt>int DID_MEM_USED         (slaballoc, smalloc)</dt>
<dd>The amount of memory currently used for driver data,
excluding the overhead from the allocator.</dd>
<dt>int DID_MEM_TOTAL_UNUSED (slaballoc, smalloc)</dt>
<dd>The amount of memory allocated from the system, but
not used by the driver.</dd>
<dt>int DID_MEM_DEFRAG_CALLS       (smalloc)</dt>
<dd>Total number of calls to defragment_small_lists().</dd>
<dt>int DID_MEM_DEFRAG_CALLS_REQ   (smalloc)</dt>
<dd>Number of calls to defragment_small_lists() with a
desired size.</dd>
<dt>int DID_MEM_DEFRAG_REQ_SUCCESS (smalloc)</dt>
<dd>Number of times, a defragmentation for a desired
size was successful.</dd>
<dt>int DID_MEM_BLOCKS_INSPECTED   (smalloc)</dt>
<dd>Number of blocks inspected during defragmentations.</dd>
<dt>int DID_MEM_BLOCKS_MERGED      (smalloc)</dt>
<dd>Number of blocks merged during defragmentations.</dd>
<dt>int DID_MEM_BLOCKS_RESULT      (smalloc)</dt>
<dd>Number of defragmented blocks (ie. merge results).</dd>
<dt>int DID_MEM_AVL_NODES          (slaballoc, smalloc)</dt>
<dd>Number of AVL nodes used to manage the large free
blocks. This value might go away again.</dd>
<dt>mixed * DID_MEM_EXT_STATISTICS (slaballoc, smalloc)</dt>
<dd><p class="first">If the driver was compiled with extended smalloc
statistics, they are returned in this entry; if the
driver was compiled without the statistics, 0 is
returned.</p>
<p>This value might go away again.</p>
<p>The array contains NUM+2 entries, where NUM is the
number of distinct small block sizes. Entry [NUM]
describes the statistics of oversized small blocks
(smalloc) resp. for all slabs (slaballoc),
entry [NUM+1] summarizes all large blocks. Each
entry is an array of these fields:</p>
<blockquote>
<div><dl class="docutils">
<dt>int DID_MEM_ES_MAX_ALLOC:</dt>
<dd>Max number of allocated blocks of this size.</dd>
<dt>int DID_MEM_ES_CUR_ALLOC:</dt>
<dd>Current number of allocated blocks of this size.</dd>
<dt>int DID_MEM_ES_MAX_FREE:</dt>
<dd>Max number of allocated blocks of this size.</dd>
<dt>int DID_MEM_ES_CUR_FREE:</dt>
<dd>Current number of allocated blocks of this size.</dd>
<dt>float DID_MEM_ES_AVG_XALLOC:</dt>
<dd>Number of explicit allocation requests per
second.</dd>
<dt>float DID_MEM_ES_AVG_XFREE:</dt>
<dd>Number of explicit deallocation requests per
second.</dd>
<dt>int DID_MEM_ES_FULL_SLABS:</dt>
<dd>Number of fully used slabs (slaballoc only).</dd>
<dt>int DID_MEM_ES_FREE_SLABS:</dt>
<dd>Number of fully free slabs (slaballoc only).</dd>
<dt>int DID_MEM_ES_TOTAL_SLABS:</dt>
<dd>Total number of slabs: partially used, fully used
and fully free (slaballoc only).</dd>
</dl>
</div></blockquote>
<p>The allocation/deallocation-per-second statistics do
not cover internal shuffling of the freelists.</p>
<p class="last">The slab statistics (entry [NUM], slaballoc only)
shows in the AVG statistics the frequence with which
slabs were allocated from resp. returned to the large
memory pool.</p>
</dd>
</dl>
</div></blockquote>
</dd>
<dt>DINFO_TRACE (7): Return the call stack &#8216;trace&#8217; information as specified</dt>
<dd><p class="first">by &lt;arg2&gt;. The result of the function is either an array (format
explained below), or a printable string. Omitting &lt;arg2&gt; defaults
to DIT_CURRENT.</p>
<dl class="last docutils">
<dt>&lt;arg2&gt; == DIT_CURRENT (0): Current call trace</dt>
<dd><blockquote class="first">
<div><dl class="docutils">
<dt>== DIT_ERROR   (1): Most recent error call trace (caught</dt>
<dd>or uncaught)</dd>
<dt>== DIT_UNCAUGHT_ERROR (2): Most recent uncaught-error call</dt>
<dd>trace</dd>
</dl>
</div></blockquote>
<p>Return the information in array form.</p>
<p>The error traces are changed only when an appropriate error
occurs; in addition a GC deletes them. After an uncaught
error, both error traces point to the same array (so the &#8216;==&#8217;
operator holds true).</p>
<p>If the array has more than one entries, the first entry is 0 or
the name of the object with the heartbeat which started the
current thread; all following entries describe the call stack
starting with the topmost function called.</p>
<p>All call entries are arrays themselves with the following
elements:</p>
<dl class="last docutils">
<dt>int[TRACE_TYPE]: The type of the call frame:</dt>
<dd>TRACE_TYPE_SYMBOL (0): a function symbol (shouldn&#8217;t happen).
TRACE_TYPE_SEFUN  (1): a simul-efun.
TRACE_TYPE_EFUN   (2): an efun closure.
TRACE_TYPE_LAMBDA (3): a lambda closure.
TRACE_TYPE_LFUN   (4): a normal lfun.</dd>
<dt>mixed[TRACE_NAME]: The &#8216;name&#8217; of the called frame:</dt>
<dd><dl class="first docutils">
<dt>_TYPE_EFUN:   either the name of the efun, or the code of</dt>
<dd>the instruction for operator closures</dd>
</dl>
<p class="last">_TYPE_LAMBDA: the numeric lambda identifier.
_TYPE_LFUN:   the name of the lfun.</p>
</dd>
<dt>string[TRACE_PROGRAM]: The (file)name of the program holding the</dt>
<dd>code.</dd>
<dt>string[TRACE_OBJECT]:  The name of the object for which the code</dt>
<dd>was executed.</dd>
<dt>int[TRACE_LOC]:</dt>
<dd><dl class="first docutils">
<dt>_TYPE_LAMBDA: current program offset from the start of the</dt>
<dd>closure code.</dd>
</dl>
<p class="last">_TYPE_LFUN:   the line number.</p>
</dd>
</dl>
</dd>
<dt>&lt;arg2&gt; == DIT_STR_CURRENT (3): Return the information about the</dt>
<dd>current call trace as printable string.</dd>
<dt>&lt;arg2&gt; == DIT_CURRENT_DEPTH (4): Return the current number of</dt>
<dd>frames on the control stack (recursion depth).</dd>
</dl>
</dd>
<dt>DINFO_EVAL_NUMBER (8): Return the current evaluation number.</dt>
<dd><p class="first">The number is incremented for each top-level call. Top-level
calls are initiated by the driver, usually in reaction to an
external event:</p>
<blockquote>
<div><ul class="simple">
<li>commands (added by add_action)</li>
<li>heart_beat, reset, clean_up</li>
<li>calls from call_out or input_to</li>
<li>master applies triggered by external events</li>
<li>calls of driver hooks in reaction to external events</li>
<li>send_erq callbacks</li>
<li>logon in interactives</li>
</ul>
</div></blockquote>
<p>The number can be used to detect cases where the same code is
executed twice in the same top level evaluation (say, heart_beat),
and also for time stamps for ordering some events.</p>
<p class="last">Please note that the counter may overflow, especially on 32 bit
systems. As a result, it can also be negative.</p>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">debug_info</a><ul>
<li><a class="reference internal" href="#SYNOPSIS">SYNOPSIS</a></li>
<li><a class="reference internal" href="#DESCRIPTION">DESCRIPTION</a></li>
</ul>
</li>
</ul>
<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hook/hook.html">hooks</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;good question.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../_sources/efun/debug_info.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>