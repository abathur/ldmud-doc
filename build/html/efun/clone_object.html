<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>efun::clone_object() &mdash; LDMud UNRELEASED documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'UNRELEASED',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="LDMud UNRELEASED documentation" href="../index.html" />
    <link rel="up" title="efun" href="efun.html" />
    <link rel="next" title="efun::clonep()" href="clonep.html" />
    <link rel="prev" title="efun::clear_bit()" href="clear_bit.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section">
<div class="section" id="SYNOPSIS">
<span id="clone_object"></span><h2>SYNOPSIS<a class="headerlink" href="#SYNOPSIS" title="Permalink to this headline">¶</a></h2>
<table class="function" style="border-spacing:0;">
<tr id="lpc.clone_object">
<td>
<a class="reference internal" href="../LPC/object.html#lpc.object" title="object">object</a> </td><td>
<code class="descname">clone_object</code></td><td><span class="sig-paren">(</span></td><td>
<a class="reference internal" href="../LPC/string.html#lpc.string" title="string">string</a><em>&nbsp;name</em></td><td colspan="1000" style="border:0;padding:0;margin:0;text-align:right;"><span class="sig-paren">)</span></td><a class="headerlink" href="#lpc.clone_object" title="Permalink to this definition">¶</a></tr>
<tr>
<td>
<a class="reference internal" href="../LPC/object.html#lpc.object" title="object">object</a> </td><td>
<code class="descname">clone_object</code></td><td><span class="sig-paren">(</span></td><td>
<a class="reference internal" href="../LPC/object.html#lpc.object" title="object">object</a><em>&nbsp;template</em></td><td colspan="1000" style="border:0;padding:0;margin:0;text-align:right;"><span class="sig-paren">)</span></td></tr>
</table></div>
<div class="section" id="DESCRIPTION">
<h2>DESCRIPTION<a class="headerlink" href="#DESCRIPTION" title="Permalink to this headline">¶</a></h2>
</div>
</div>
<p>Clone a new object from definition &lt;name&gt;, or alternatively from
the object &lt;template&gt;. In both cases, the new object is given
an unique name and returned.</p>
<p>The original used for cloning, called blueprint, should not be
used in the system, just for cloning. The cloned objects
contain only the data but the blueprint also the function code.
The blueprint is the one without a unique number at the end of
the object&#8217;s name. The clone_object() function never
returns a blue print.</p>
<p>If the &lt;name&gt; or &lt;template&gt; designates a cloned object itself,
the system looks up the blueprint object _by <a href="#id1"><span class="problematic" id="id2">name_</span></a>.</p>
<p>If the blueprint exists and has a heart_beat(), clone_object()
turns it off.</p>
<p>Note that the pathname must be complete, which means there are no
relative paths allowed.</p>
<p>If strict euids are enforced, the cloning object must have
a non-zero euid.</p>
<p>&#8211; Variable Initialization &#8211;</p>
<p>In general, variables are initialized for blueprints and clones alike
with a call to the internal lfun __INIT().</p>
<p>However, if #pragma share_variables is in effect (either explicitely
given in the source or implicitely as runtime option), the values for
a clone&#8217;s uninitialized variables are taken from the _current_
variables of the object&#8217;s blueprint.</p>
<p>In the absence of share_variables, variables without explicit
initializers are initialized to 0.</p>
<p>EXAMPLES
// Clone a torch (filename in non-compat format)
object torch;
torch = clone_object(&#8220;/obj/torch&#8221;);</p>
<p>// Clone two keys (filename in compat format)
object key1, key2;
key1 = clone_object(load_object(&#8220;obj/key&#8221;));
key2 = clone_object(key1);</p>
<p>// Create a specialized weapons blueprint.
&#8212; std/weapon.c: &#8212;
#pragma share_variables
int weapon_class = 1;</p>
<p>&#8212; broadsword.c: &#8212;
inherit &#8220;/std/weapon&#8221;;</p>
<dl class="docutils">
<dt>int create() {</dt>
<dd>weapon_class = 2;
replace_program(&#8220;/std/weapon&#8221;);</dd>
</dl>
<p>}</p>
<p>Modified in LDMud 3.2.6 to take an object as argument.
LDMud 3.3.378 consolidated the variable initialization with the
share_variables pragma.</p>
<blockquote>
<div><blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">See Also:</th><td class="field-body"><a class="reference internal" href="blueprint.html#lpc.blueprint" title="blueprint"><code class="xref lpc lpc-efun docutils literal"><span class="pre">blueprint()</span></code>(E)</a>, <a class="reference internal" href="clonep.html#lpc.clonep" title="clonep"><code class="xref lpc lpc-efun docutils literal"><span class="pre">clonep()</span></code>(E)</a>, <a class="reference internal" href="destruct.html#lpc.destruct" title="destruct"><code class="xref lpc lpc-efun docutils literal"><span class="pre">destruct()</span></code>(E)</a>, <a class="reference internal" href="clones.html#lpc.clones" title="clones"><code class="xref lpc lpc-efun docutils literal"><span class="pre">clones()</span></code>(E)</a>, <a class="reference internal" href="load_name.html#lpc.load_name" title="load_name"><code class="xref lpc lpc-efun docutils literal"><span class="pre">load_name()</span></code>(E)</a>,</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><a class="reference internal" href="load_object.html#lpc.load_object" title="load_object"><code class="xref lpc lpc-efun docutils literal"><span class="pre">load_object()</span></code>(E)</a>, <a class="reference internal" href="move_object.html#lpc.move_object" title="move_object"><code class="xref lpc lpc-efun docutils literal"><span class="pre">move_object()</span></code>(E)</a>, <a class="reference internal" href="../concepts/uids.html#lpc.uids" title="uids"><code class="xref lpc lpc-concept docutils literal"><span class="pre">uids</span></code>(C)</a>, <a class="reference internal" href="program_name.html#lpc.program_name" title="program_name"><code class="xref lpc lpc-efun docutils literal"><span class="pre">program_name()</span></code>(E)</a>, <a class="reference internal" href="../LPC/pragma.html#lpc.pragma" title="pragma"><code class="xref lpc lpc-lang docutils literal"><span class="pre">pragma</span></code>(LPC)</a></p>
</div></blockquote>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">efun::clone_object()</a><ul>
<li><a class="reference internal" href="#SYNOPSIS">SYNOPSIS</a></li>
<li><a class="reference internal" href="#DESCRIPTION">DESCRIPTION</a></li>
</ul>
</li>
</ul>
<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../applied/applied.html">applied</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/concepts.html">concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../driver/driver.html">driver</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="efun.html">efun</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hook/hook.html">hook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../internals/internals.html">internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../master/master.html">master</a></li>
<li class="toctree-l1"><a class="reference internal" href="../obsolete/obsolete.html">obsolete</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LPC/lpc.html">LPC</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;good question.
      
      |
      <a href="../_sources/efun/clone_object.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>