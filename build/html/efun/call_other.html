<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>(fun) &mdash; LDMud UNRELEASED documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'UNRELEASED',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="LDMud UNRELEASED documentation" href="../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="(fun)">
<div class="section" id="SYNOPSIS">
<h2>SYNOPSIS<a class="headerlink" href="#SYNOPSIS" title="Permalink to this headline">¶</a></h2>
<dl class="efun">
<dt id="lpc.call_other">
unknown <code class="descname">call_other</code><span class="sig-paren">(</span>object<em>&nbsp;ob</em>, string<em>&nbsp;fun</em>, mixed<em>&nbsp;arg</em>, ...<span class="sig-paren">)</span><a class="headerlink" href="#lpc.call_other" title="Permalink to this definition">¶</a></dt>
<dt>
unknown <code class="descname">call_other</code><span class="sig-paren">(</span>object<em>&nbsp;*ob</em>, string<em>&nbsp;fun</em>, mixed<em>&nbsp;arg</em>, ...<span class="sig-paren">)</span></dt>
<dt id="lpc.fun">
ob-&gt;<code class="descname">fun</code><span class="sig-paren">(</span>mixed<em>&nbsp;arg</em>, ...<span class="sig-paren">)</span><a class="headerlink" href="#lpc.fun" title="Permalink to this definition">¶</a></dt>
<dt>
<code class="descname">ob-&gt;&quot;fun&quot; (mixed arg, ...)</code></dt>
<dt id="lpc.(fun)">
ob-&gt;<code class="descname">(fun)</code><span class="sig-paren">(</span>mixed<em>&nbsp;arg</em>, ...<span class="sig-paren">)</span><a class="headerlink" href="#lpc.(fun)" title="Permalink to this definition">¶</a></dt>
</dl>

</div>
<div class="section" id="DESCRIPTION">
<h2>DESCRIPTION<a class="headerlink" href="#DESCRIPTION" title="Permalink to this headline">¶</a></h2>
</div>
</div>
<p>Call a member function &lt;fun&gt; in another object &lt;ob&gt; with an
the argument(s) &lt;arg...&gt;. Result is the value returned from
the called function (or 0 for non-existing or void functions).</p>
<p>Additionally the efun accepts an array of objects as &lt;ob&gt;: the
function is called with the same arguments in all the given objects.
The single results are collected in an array and yield the final
result.  Array elements can be objects or the names of existing
objects; destructed objects and 0s will yield a &#8216;0&#8217; as result, but
don&#8217;t cause an error.</p>
<p>The object(s) can be given directly or via a string (i.e. its
object_name). If it is given by a string and the object does not
exist yet, it will be loaded.</p>
<p>ob-&gt;fun(args) and &#8220;ob_name&#8221;-&gt;fun(args) is equivalent to
call_other(ob, &#8220;fun&#8221;, args). Nowadays the ob_name string can
also be a variable.</p>
<p>ob-&gt;fun(args) and ob-&gt;&#8221;fun&#8221;(args) are equivalent to
call_other(ob, &#8220;fun&#8221;, args). ob-&gt;(fun)(args) are equivalent
to call_other(ob, fun, args) where fun is a runtime expression
returning the function name.</p>
<p>If ob::fun does not define a publicly accessible function, the
efun will call the H_DEFAULT_METHOD hook if set. If the hook
is not set or can&#8217;t resolve the call either, call_other()
will return 0, which is indistinguishable from a function returning 0.</p>
<p>Calls to the master object never use the H_DEFAULT_METHOD hook.
To force non-default calls, the efun call_direct() can be used.</p>
<p>&#8220;publicly accessible&#8221; means &#8220;public&#8221; when calling other objects,
and &#8220;public&#8221; or &#8220;static&#8221; when calling this_object(). &#8220;private&#8221;
and &#8220;protected&#8221; function can never be called with call_other().</p>
<p>The return type of call_other() is &#8216;any&#8217; be default. However,
if your LPC code uses #pragma strict_types, the return type is
&#8216;unknown&#8217;, and the result of call_other() must be casted to
the appropriate type before you can use it for anything.</p>
<p>EXAMPLES
// All the following statements call the lfun QueryProp()
// in the current player with the argument P_SHORT.
string str, fun;</p>
<p>str = (string)call_other(this_player(), &#8220;QueryProp&#8221;, P_SHORT);
fun = &#8220;QueryProp&#8221;;
str = (string)call_other(this_player(), fun, P_SHORT);</p>
<p>str = (string)this_player()-&gt;QueryProp(P_SHORT);
str = (string)this_player()-&gt;&#8221;QueryProp&#8221;(P_SHORT);
fun = &#8220;QueryProp&#8221;;
str = (string)this_player()-&gt;(fun)(P_SHORT);</p>
<p>You have to do explicit type casting because of the unknown
return type, if you have set #pragma strict_types.</p>
<p>// This statement calls the lfun short() in all interactive users
// and stores the collected results in a variable.
string <a href="#id1"><span class="problematic" id="id2">*</span></a>s;</p>
<p>s = (string <a href="#id3"><span class="problematic" id="id4">*</span></a>)users()-&gt;short();</p>
<dl class="docutils">
<dt>!Compat: call_other(&#8220;/users/luser/thing&#8221;, &#8221;???&#8221;, 0);</dt>
<dd>Compat: call_other(&#8220;users/luser/thing&#8221;, &#8221;???&#8221;, 0);</dd>
</dl>
<p>This looks a bit weird but it was used very often to just load
the object by calling a not existing function like &#8221;???&#8221;.
Fortunately nowadays there is an efun load_object() for this
purpose.</p>
<dl class="docutils">
<dt>In LDMud 3.2.8 the following improvements were made:</dt>
<dd><ul class="first last simple">
<li>the forms x-&gt;&#8221;y&#8221;() and x-&gt;(y)() are recognized;</li>
<li>the form x-&gt;y() no longer clashes with a local variable also
called &#8220;y&#8221;;</li>
<li>a simul_efun call_other() also catches -&gt;() calls.</li>
<li>call_other can be applied on arrays of objects.</li>
</ul>
</dd>
</dl>
<p>LDMud 3.2.10 made the call on arrays of objects configurable.
LDMud 3.3.113 introduced the H_DEFAULT_METHOD hook.
LDMud 3.5.0 made the call on arrays of objects non-optional.</p>
<blockquote>
<div><blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">See Also:</th><td class="field-body"><a class="reference internal" href="call_direct.html#lpc.call_direct" title="call_direct"><code class="xref lpc lpc-efun docutils literal"><span class="pre">call_direct</span></code>(E)</a>, <a class="reference internal" href="call_direct_resolved.html#lpc.call_direct_resolved" title="call_direct_resolved"><code class="xref lpc lpc-efun docutils literal"><span class="pre">call_direct_resolved</span></code>(E)</a>, <a class="reference internal" href="call_resolved.html#lpc.call_resolved" title="call_resolved"><code class="xref lpc lpc-efun docutils literal"><span class="pre">call_resolved</span></code>(E)</a>, <a class="reference internal" href="../applied/create.html#lpc.create" title="create"><code class="xref lpc lpc-applied docutils literal"><span class="pre">create</span></code>(A)</a>,</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p><a class="reference internal" href="../LPC/pragma.html#lpc.pragma" title="pragma"><span class="xref lpc lpc-lang">pragma</span>(LPC)</a>, <a class="reference internal" href="extern_call.html#lpc.extern_call" title="extern_call"><code class="xref lpc lpc-efun docutils literal"><span class="pre">extern_call</span></code>(E)</a>, <a class="reference internal" href="function_exists.html#lpc.function_exists" title="function_exists"><code class="xref lpc lpc-efun docutils literal"><span class="pre">function_exists</span></code>(E)</a>, <span class="xref lpc lpc-lang">functions</span>,
<a class="reference internal" href="map_objects.html#lpc.map_objects" title="map_objects"><code class="xref lpc lpc-efun docutils literal"><span class="pre">map_objects</span></code>(E)</a></p>
</div></blockquote>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">(fun)</a><ul>
<li><a class="reference internal" href="#SYNOPSIS">SYNOPSIS</a></li>
<li><a class="reference internal" href="#DESCRIPTION">DESCRIPTION</a></li>
</ul>
</li>
</ul>
<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hook/hook.html">hooks</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;good question.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../_sources/efun/call_other.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>