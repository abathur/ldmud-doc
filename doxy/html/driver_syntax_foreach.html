<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>LDMud: foreach</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LDMud
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('driver_syntax_foreach.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">foreach </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The instruction evaluates its range specification - either a simple <code>expr</code> which can yield an array, a struct, a string, a mapping or an integer, or an integer range <code>expr1</code> through <code>expr2</code> - and executes <code>statement</code> once for each value in the range. The respective value is assigned to <code>var</code> right before <code>statement</code> is executed.</p>
<p>A 'break' in the <code>statement</code> will terminate the loop. A 'continue' will continue the execution from the beginning of the loop.</p>
<p>Every <code>var</code> specification can declare a new local variable, whose scope is the whole <a class="el" href="driver_syntax_foreach.html">foreach</a> statement.</p>
<h2>The normal form (one :part:<code>expr</code>):</h2>
<p><code>expr</code> is evaluated and has to yield an array, a struct, a string or a mapping (or reference to the former), or an integer.</p>
<p>If <code>expr</code> is a array, struct, or string, the values of <code>expr</code> (in case of the string, the integer values of the characters) are then assigned one by one in order of occurence to <code>var</code>, and <code>statement</code> is executed for every assignment.</p>
<p>If <code>expr</code> is a mapping, the keys are assigned one by one to <code>var</code>, and the values for each key are assigned in order to <code>var2</code> .. <code>varN</code>. If there are more values than variable, the extraneous values are ignored. Due to the nature of mappings, a specific order of the keys can not be guaranteed.</p>
<p>If <code>expr</code> evaluates to a reference to an array, mapping, or string, the loop will assign references to the values into the variables. This allows the loop body to change the contents of the original data.</p>
<p>If <code>expr</code> evalutes to an integer, the loop will count up <code>var</code> from 0 to <code>expr</code>-1, basically implementing a count loop.</p>
<p>If there are more variables than necessary, the unneeded ones are not changed.</p>
<h2>The ranged form (:part:<code>expr1</code> .. :part:<code>expr2</code>):</h2>
<p><code>expr1</code> and <code>expr2</code> are evaluated and must yield integers. The loop will count up <code>var</code> from <code>expr1</code> to <code>expr2</code>, basically implementing a counted loop.</p>
<p>If <code>expr1</code> is less than <code>expr2</code>, the loop will terminate at once.</p>
<p>If there are more than variable, the unneeded ones are not changed.</p>
<h2>What happens if :part:<code>expr</code> is changed in the loop?</h2>
<p>If <code>expr</code> yields an array or struct:</p>
<ul>
<li>assignments to single elements or to array ranges effect the values assigned to the variable:~~~{.c} a = ({1, 2, 3}) foreach(x : a) { a[1..2] = ({4, 5}); write(x+" "); } // writes 1 4 5</li>
</ul>
<div class="fragment"><div class="line">- operations which implicitely copy the array or <span class="keyword">struct</span> (<span class="keyword">this</span> includes range assignments which change the size) don<span class="stringliteral">&#39;t have an effect on the loop.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">If `expr` yields a mapping, the loop will run over the indices the mapping had at the begin of the loop. Deleted indices are silently skipped, new indices ignored, but changes of the data of existing indices are acknowledged.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">If `expr` yields a string, the value used at the start of the loop remains.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">@par warning: The additional syntax forms using &quot;in&quot; as keyword are meant to make re-engineering of MudOS objects easier. Do not use them for newly written code, as they may not be available in future.</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">@par Usage:</span></div>
<div class="line"><span class="stringliteral">@parblock </span></div>
<div class="line"><span class="stringliteral">Call `quit()` in all interactive users:</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">~~~{.c}</span></div>
<div class="line"><span class="stringliteral">foreach(o : users()) o-&gt;quit();</span></div>
<div class="line"><span class="stringliteral">foreach(object o : users()) o-&gt;quit();</span></div>
</div><!-- fragment --><p> Print the contents of a mapping <code>m</code>:</p>
<div class="fragment"><div class="line"><span class="keywordflow">foreach</span>(key, value : m) printf(<span class="stringliteral">&quot;%O:%O\n&quot;</span>, key, value);</div>
<div class="line"><span class="keywordflow">foreach</span>(mixed key, mixed value : m) printf(<span class="stringliteral">&quot;%O:%O\n&quot;</span>, key, value);</div>
</div><!-- fragment --><p> The first foreach loop below won't change the string it operates over, but the second loop (which operates on a reference to the string) does change it:</p>
<div class="fragment"><div class="line">s = <span class="stringliteral">&quot;FOOBAR&quot;</span>;</div>
<div class="line"><span class="keywordflow">foreach</span>(i : s) i += 32;  <span class="comment">// s == &quot;FOOBAR&quot;</span></div>
<div class="line"><span class="keywordflow">foreach</span>(i : &amp;s) i += 32; <span class="comment">// s == &quot;foobar&quot;</span></div>
</div><!-- fragment --><p> Count from 0 to 5:</p>
<div class="fragment"><div class="line"><span class="keywordflow">foreach</span>(i : 6) printf(<span class="stringliteral">&quot;%d\n&quot;</span>, i);</div>
</div><!-- fragment --><p> Count from 1 to 6:</p>
<div class="fragment"><div class="line"><span class="keywordflow">foreach</span>(i : 1 .. 6) printf(<span class="stringliteral">&quot;%d\n&quot;</span>, i);</div>
</div><!-- fragment --><dl class="section user"><dt>History:</dt><dd><div class="fragment"><div class="line">changed (3.3.44) -- introduced the use of references, the loop over an integer expression, and the loop over an integer range.</div>
<div class="line">changed (3.3.266) -- added support <span class="keywordflow">for</span> structs.</div>
</div><!-- fragment --></dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="driver_syntax_for.html">for</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="driver_syntax_overview.html">LPC syntax</a></li>
    <li class="footer">Generated on Thu Mar 9 2017 17:45:24 for LDMud by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
