<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Tsunami: tls</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tsunami
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('driver_concepts_tls.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">tls </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>TLS stands for Transport Layer Security which is the successor of the well known SSL (Secure Socket Layer). Both techniques provide a way to authenticate and encrypt the data send through a network connection.</p>
<p>By enabling TLS during compilation of the driver you can provide a secure channel into the mud to your players.</p>
<p>In difference to other solutions as "sslwrap" or "stunnel" the driver integrated approach has the advantage that the mud sees the real IP of the player, not the IP of the local mud host.</p>
<dl class="section user"><dt>misleading:This manpage might be not quite up to date with the implementation.</dt><dd></dd></dl>
<dl class="section user"><dt>Usage:</dt><dd><div class="fragment"><div class="line">To use TLS configure your driver with --enable-tls option. After starting your driver you have five <span class="keyword">new</span> efuns (tls_init_connection(), tls_deinit_connection(), tls_error(), tls_query_connection_info(), tls_query_connection_state()).</div>
<div class="line">You can <span class="keywordflow">switch</span> on TLS by calling tls_init_connection(). This can happen in three ways:</div>
<div class="line">in telnet_neg</div>
<div class="line">Advantage of <span class="keyword">this</span> method is that you can offer TLS on a normal mud port. If you have a limited number of ports <span class="keyword">this</span> can become important. The TLS connection will be started by the client with help of telnet option STARTTLS. Currently there are no mudclients that support <span class="keyword">this</span> method.</div>
<div class="line"></div>
<div class="line">You will have to implement the telnet option STARTTLS (46) for this method. The draft for this can be found here: http:<span class="comment">//www.ietf.org/proceedings/99mar/I-D/draft-ietf-tn3270e-telnet-tls-01.txt Call tls_init_connection() to initiate the TLS handshake.</span></div>
<div class="line">in connect</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">Todo</div>
<div class="line"></div>
<div class="line">evaluate whether we can/if it&#39;s worth rendering references to a <a class="code" href="classmaster.html">master</a> func as <a class="code" href="classmaster.html">master</a>-&gt;function()</div>
<div class="line"></div>
<div class="line">Advantage of this method is that your users can connect with any program that supports TLS/SSL. Examples are telnet-ssl, sslwrap or stunnel. Disadvantage is that you have to spend a dedicated port for this.</div>
<div class="line"></div>
<div class="line">You have to call tls_init_connection() as first command after the player connected (normally in master_ob-&gt;connect())</div>
<div class="line">in an interactive <span class="keywordtype">object</span> using a callback.</div>
<div class="line">This method is similar to method (1), but not limited to telnet: it is useful for implementing protocols that use STARTTLS like SMTP or IMAP. tls_init_connection() can be called at any time by the interactive <span class="keywordtype">object</span>.</div>
<div class="line"></div>
<div class="line">You must not write to the connection after calling this <a class="code" href="classefun.html">efun</a> until the callback is executed (the prompt will be supressed automatically during this time).</div>
<div class="line">To test your code, you can use the openssl binary. openssl s_client -connect host:port should display your certificate and anything you write after the callback is executed. If you encounter the error message SSL3_GET_RECORD: wrong version number you&#39;re probably writing to the connection while you should not.</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>History:</dt><dd><div class="fragment"><div class="line">introduced (3.3.474)</div>
<div class="line">backported (3.2.11)</div>
</div><!-- fragment --></dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classefun.html#a673b9f37b9750af6efb10678180461ab">efun::tls_available()</a>, efun::tls_check_certificate(), <a class="el" href="classefun.html#a640eca286d6cfbc9d0f9f40f7b31269d">efun::tls_deinit_connection()</a>, <a class="el" href="classefun.html#ab298aabbd06837fdab935ae82260e51f" title="tls_error() returns a string describing the error behind the error number &lt;errorno&gt;. ">efun::tls_error()</a>, efun::tls_init_connection(), <a class="el" href="classefun.html#a8fff6671c194e17e8d07f03256faf626" title="If &lt;ob&gt; does not have a TLS connection, if the connection is still being set-up, or if &lt;ob&gt; is not in...">efun::tls_query_connection_info()</a>, <a class="el" href="classefun.html#a1d9e28db0cff9d02318184eb56aafdba" title="tls_query_connection_state() returns a positive number if &lt;ob&gt;&#39;s connection is TLS secured...">efun::tls_query_connection_state()</a>, <a class="el" href="classefun.html#a30bd281e29f7465ed9ff74217be3f760">efun::tls_refresh_certs()</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="driver_todo.html">todo</a></li>
    <li class="footer">Generated on Tue Jun 7 2016 19:15:59 for Tsunami by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
