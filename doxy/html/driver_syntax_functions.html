<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>LDMud: functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LDMud
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('driver_syntax_functions.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">functions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Functions are named blocks of code which are be called with a number of argument values, and which return a result value to the caller.</p>
<p>Functions are defined in an object and are also known as "local funs" or short "lfuns".</p>
<h2>Defining A Function</h2>
<p>A function definition takes the form:</p>
<div class="fragment"><div class="line">&lt;modifiers&gt; &lt;type&gt; name ( &lt;arguments&gt; ) {</div>
<div class="line">  statements...</div>
<div class="line">}</div>
</div><!-- fragment --><p> The parts in detail:</p>
<p><code>&lt;modifiers&gt;</code> can be any one of "static", "private", "public" and "protected" (see <a class="el" href="driver_syntax_modifiers.html">modifiers</a>), optionally combined with "varargs" (see <a class="el" href="driver_syntax_varargs.html">varargs</a>) and/or "nomask". If not specified, the function behaves as if it was specified as "public", but this visibility can be restricted in derived object through non-public inheritance.</p>
<p><code>&lt;type&gt;</code> is the type of the result returned by the function. If specified as "void", the function is compiled to return the value 0 under all circumstances. If not specified, the type is assumed to be "mixed", furthermore typechecking is disabled for this function.</p>
<p><code>name</code> is the name of the function, e.g. "short", or "Nice_Try", under which it is made known.</p>
<p><code>&lt;arguments&gt;</code> is a list of variable definitions in the normal <code>&lt;type&gt; &lt;name&gt;</code> style, separated by comma. Examples:</p>
<ul>
<li><code>()</code> takes no arguments</li>
<li><code>(int a)</code> takes one integer argument</li>
<li><code>(mixed a, object *b)</code> takes two arguments, one arbitrary type, one array of objects</li>
</ul>
<p><code>{ statements... }</code> defines the code for this function. This is a normal block (see <a class="el" href="driver_syntax_block.html">block</a>) and as such can define its own local variables.</p>
<h2>Declaring A Function</h2>
<p>A function declaration makes the name and type of a function known to the compiler with the assertion that the code for this function will be provided "elsewhere".</p>
<p>[&lt;modifier&gt;...] [&lt;type&gt;] &lt;name&gt; ([&lt;argument&gt;...]);: <code>[&lt;modifier&gt;...] [&lt;type&gt;] &lt;name&gt; ([&lt;argument&gt;...]);</code> The form is:</p>
<div class="fragment"><div class="line">&lt;modifiers&gt; &lt;type&gt; name ( &lt;arguments&gt; );</div>
</div><!-- fragment --><p> Typical uses are:</p>
<ul>
<li>to declare in advance functions which are called before they can be defined; for example if the <a class="el" href="classapplied.html#ae2ee59f7cc16ee42559c87e81c433039" title="The H_CREATE_SUPER, H_CREATE_OB, and H_CREATE_CLONE hooks define the function or closure to be called...">applied::create()</a> function of an object calls other functions which are defined after the <a class="el" href="classapplied.html#ae2ee59f7cc16ee42559c87e81c433039" title="The H_CREATE_SUPER, H_CREATE_OB, and H_CREATE_CLONE hooks define the function or closure to be called...">applied::create()</a>.</li>
<li>to declare functions which will be provided by an inheriting object.</li>
</ul>
<p>Calling a declared but undefined function results in a runtime error.</p>
<h2>Calling A Function</h2>
<p>Functions in other objects are called with <a class="el" href="classefun.html#a14431f7de9bcc796d309ac6f3193f5d4">efun::call_other()</a>, which can be shortened to <code>-&gt;</code>:</p>
<div class="fragment"><div class="line">ob-&gt;fun(a, b, c)</div>
<div class="line">call_other(ob, <span class="stringliteral">&quot;fun&quot;</span>, a, b, c)</div>
</div><!-- fragment --> <dl class="section user"><dt>note: See the entry  driver_hook_default_method "H_DEFAULT_METHOD" in  driver_hook_overview "hook" for a modification of this behaviour.</dt><dd></dd></dl>
<p>Functions in the same object are called just by writing their name, followed by the arguments in parenthesis:</p>
<div class="fragment"><div class="line">short()</div>
<div class="line">compute(a)</div>
<div class="line">do_that(a, &quot;foo&quot;)</div>
</div><!-- fragment --><p> Array function arguments can be 'flattened' with the '...' operator. For example:</p>
<div class="fragment"><div class="line">mixed * m = ({ <span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span> });</div>
<div class="line">fun(m..., 1);</div>
</div><!-- fragment --><p> will be executed as:</p>
<div class="fragment"><div class="line">fun(<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span>, 1);</div>
</div><!-- fragment --><p> If the number of values passed to the function does not match the number of expected arguments (and if type checking is not enabled), the driver will perform the necessary adaption at call time: excess values are ignored, missing values are substituted by the number 0. The values passed to the called function are massaged by the driver to match the argument list.</p>
<h2>Functions And Inheritance</h2>
<p>A "public" or "protected" (== "static") function defined in one object is also visible in all inheriting objects. The exception from this rule is when an inheriting child redefines ("overloads") the inherited function with its own. When compiling with type checking, the argument list of the redefined function has to match the original one.</p>
<p>When a function is called, the driver looks for the function first in the object called, and if not found there, then in the inherited objects.</p>
<p>To explicitely call an inherited function (useful when a redefining functions wants to use the original one), the <code>::</code> operator is used:</p>
<div class="fragment"><div class="line">::create()</div>
<div class="line">::compute(a)</div>
</div><!-- fragment --><p> The named function is searched only in the inherited objects, and the first found is used.</p>
<p>If the function is inherited from several objects and a specific one is to be called, the "::" can be extended to contain the partial or full name of the inherited object:</p>
<div class="fragment"><div class="line">inherit <span class="stringliteral">&quot;/obj/cooker&quot;</span>;</div>
<div class="line">inherit <span class="stringliteral">&quot;/obj/container&quot;</span>;</div>
<div class="line"></div>
<div class="line">tainer::create()</div>
<div class="line">container::create()</div>
<div class="line">&quot;tainer&quot;::create()</div>
<div class="line">&quot;container&quot;::create()</div>
<div class="line">&quot;obj/container&quot;::create()</div>
<div class="line">&quot;/obj/container&quot;::create()</div>
</div><!-- fragment --><p> all of these call <code>create()</code> in the container inherit. Note that the name given to the <code>::</code> operator is matched against the ends of the inherited names.</p>
<p>One special form of this call is</p>
<div class="fragment"><div class="line"><a class="code" href="classefun.html#a12339d2d254849a1342fd79bdb89f638">efun::find_object</a>()</div>
</div><!-- fragment --><p> which bypasses any redefinition of an efun (here <a class="el" href="classefun.html#a12339d2d254849a1342fd79bdb89f638" title="Find an object with the object_name str. ">efun::find_object()</a>) and directly calls the efun itself. This is only possible for efun-redefinitions which do not use the "nomask" modifier.</p>
<p>Additionally, a call to a function inherited from several objects can be instructed to call <em>all</em> inherited functions through the use of the wildcards "*" (match any number of arbitrary characters) and "?" (match one arbitrary character)</p>
<div class="fragment"><div class="line">inherit <span class="stringliteral">&quot;/obj/cooker&quot;</span>;</div>
<div class="line">inherit <span class="stringliteral">&quot;/obj/container&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="stringliteral">&quot;*&quot;</span>::create()</div>
<div class="line"><span class="stringliteral">&quot;co*&quot;</span>::create()</div>
<div class="line"><span class="stringliteral">&quot;*er&quot;</span>::create()</div>
</div><!-- fragment --><p> all of these call both inherited <code>create()</code> functions. The function called this way must not take arguments, and the single results from all calls are combined into one array used as final result. If there is no such function inherited at all, the statement will just return an empty array.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="driver_syntax_types.html">types</a>, <a class="el" href="driver_syntax_modifiers.html">modifiers</a>, <a class="el" href="driver_syntax_varargs.html">varargs</a>, <a class="el" href="driver_syntax_references.html">reference</a>, <a class="el" href="classefun.html#a14431f7de9bcc796d309ac6f3193f5d4">efun::call_other()</a>, <a class="el" href="classefun.html#a80949ae9919cf34ceed353d2f3a005b8" title="Set up a call to function fun in the current object, or to closure cl. ">efun::call_out()</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="driver_syntax_overview.html">LPC syntax</a></li>
    <li class="footer">Generated on Thu Mar 9 2017 17:45:24 for LDMud by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
