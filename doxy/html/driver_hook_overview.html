<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>LDMud: Driver-supported hooks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LDMud
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('driver_hook_overview.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Driver-supported hooks </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>To allow a greater flexibility of the muds, the gamedrivers since 3.2.1 moved several once hardcoded 'underground' activities from the driver into the mudlib. This includes for example the differences between compat and native mode.</p>
<p>The hooks are set with the privileged <a class="el" href="classefun.html#a2756bce82caa9cc75107c97064b16922" title="This privileged efun sets the driver hook &#39;what&#39; (values are defined in &lt;driver_hook.h&gt;) to &#39;arg&#39;. ">efun::set_driver_hook()</a>. Some of the hooks are mandatory, some not. Most hooks accept unbound lambda closures as values, some also lfun closures or even strings.</p>
<p>The hooks are identified by an ordinal number, for which symbolic names are defined in <code>/sys/driverhooks.h</code>.</p>
<p><a class="el" href="driver_hook_move_object.html">H_MOVE_OBJECT0</a> <a class="el" href="driver_hook_move_object.html">H_MOVE_OBJECT1</a> Mandatory hooks to implement <a class="el" href="classefun.html#a4190a089c412b88e938a4a34865e8366" title="The item, which can be an object_name or an object, is moved into it&#39;s new environment dest...">efun::move_object()</a>.</p>
<p><a class="el" href="driver_hook_load_uids.html">H_LOAD_UIDS</a> <a class="el" href="driver_hook_clone_uids.html">H_CLONE_UIDS</a> Mandatory hooks to determine the uid and euid of loaded or cloned objects.</p>
<p><a class="el" href="driver_hook_create_super.html">H_CREATE_SUPER</a> <a class="el" href="driver_hook_create_ob.html">H_CREATE_OB</a> <a class="el" href="driver_hook_create_clone.html">H_CREATE_CLONE</a> Optional hooks to initialize an object after creation.</p>
<p><a class="el" href="driver_hook_create_super.html">H_CREATE_SUPER</a> is called for blueprints implicitely loaded by inheritance, <a class="el" href="driver_hook_create_ob.html">H_CREATE_OB</a> for explicitely loaded blueprints/objects, and <a class="el" href="driver_hook_create_clone.html">H_CREATE_CLONE</a> for cloned objects.</p>
<p><a class="el" href="driver_hook_reset.html">H_RESET</a> Optional hook to reset an object.</p>
<p><a class="el" href="driver_hook_clean_up.html">H_CLEAN_UP</a> Optional hook to clean up an object.</p>
<p><a class="el" href="driver_hook_default_method.html">H_DEFAULT_METHOD</a> Optional hook to provide default implementation for unresolved calls.</p>
<p><a class="el" href="driver_hook_default_prompt.html">H_DEFAULT_PROMPT</a> Optional hook for the command prompt. If this hook is not used, the driver will use "&gt; " as the command prompt.</p>
<p><a class="el" href="driver_hook_print_prompt.html">H_PRINT_PROMPT</a> Optional hook to print the current command prompt. If this hook is not set, the driver will just print the prompt to the user.</p>
<p><a class="el" href="driver_hook_command.html">H_COMMAND</a> Optional hook to parse and execute commands. If this hook is used, it bypasses the normal command parsing done by the driver (including <a class="el" href="driver_hook_modify_command.html">H_MODIFY_COMMAND</a> and <a class="el" href="driver_hook_notify_fail.html">H_NOTIFY_FAIL</a> hooks).</p>
<p><a class="el" href="driver_hook_modify_command.html">H_MODIFY_COMMAND</a> Optional hook to modify commands (both entered or given by a call to <a class="el" href="classefun.html#ae0ce5d3f989d2054ce6b26d5fb22ab6d" title="Execute str as a command given directly by the user. ">efun::command()</a>) before the parser sees them (this includes special commands like 'status').</p>
<p><a class="el" href="driver_hook_modify_command_fname.html">H_MODIFY_COMMAND_FNAME</a> Mandatory hook specifying the name of the 'modify_command' lfun to call for newly entered commands as result of a <a class="el" href="classefun.html#a48f9b91df9e47b18043fc33e4c28f6d7" title="All commands for the current object (which must interactive) will be passed to ob-&gt;modify_command() b...">efun::set_modify_command()</a>.</p>
<p><a class="el" href="driver_hook_notify_fail.html">H_NOTIFY_FAIL</a> Mandatory hook to issue the default message if an entered command couldn't be parsed and no <a class="el" href="classefun.html#afe008c0344508051dcc4d07d79dd0bc4" title="Store str as the error message given instead of the default message &quot;What ?&quot;. ">efun::notify_fail()</a> command is in effect.</p>
<p><a class="el" href="driver_hook_send_notify_fail.html">H_SEND_NOTIFY_FAIL</a> Optional hook to send the notify fail message, regardless of how it was determined, to the player. If the hook is not set, the message is delivered using <a class="el" href="classefun.html#ac82979d3c13cf20f0fd4b2269248a9ab" title="Send a message str to object ob (which is looked up and loaded by given name if necessary). ">efun::tell_object()</a> internally.</p>
<p><a class="el" href="driver_hook_no_ipc_slot.html">H_NO_IPC_SLOT</a> Optional hook specifying the message given to logins rejected due to space limitations (MAX_PLAYER).</p>
<p><a class="el" href="driver_hook_include_dirs.html">H_INCLUDE_DIRS</a> Semi-mandatory hook specifying the directories where &lt;&gt;-type include files are searched (this includes ""-includes not found as specified).</p>
<p><a class="el" href="driver_hook_auto_include.html">H_AUTO_INCLUDE</a> Optional hook specifying a string to be included before the source of every compiled LPC object.</p>
<p><a class="el" href="driver_hook_telnet_neg.html">H_TELNET_NEG</a> Optional hook to specifiy how to perform a single telnet negotiation. If not set, most telnet options are rejected (read: only a very minimal negotiation takes place).</p>
<p><a class="el" href="driver_hook_no_echo.html">H_NOECHO</a> Optional hook to specifiy how to perform the telnet actions to switch the echo mode (used for e.g. passwords with <a class="el" href="classefun.html#af611da839c18f550d1639881f3f3cade" title="Enable next line of user input to be sent to the function fun as an argument. ">efun::input_to()</a>). If not set, a default handling is performed.</p>
<p>IMPORTANT: If this hook is used, the control of all telnet negotiation is transferred to the mudlib (you must combine it with <a class="el" href="driver_hook_telnet_neg.html">H_TELNET_NEG</a> to conform to the telnet protocol).</p>
<p><a class="el" href="driver_hook_erq_stop.html">H_ERQ_STOP</a> Optional hook to notify the mudlib about the termination of the erq demon.</p>
<p><a class="el" href="driver_hook_msg_discarded.html">H_MSG_DISCARDED</a> Optional hook to specify a message or take other measures when a message had to be discarded.</p>
<ul>
<li><a class="el" href="driver_hook_auto_include.html">H_AUTO_INCLUDE</a></li>
<li><a class="el" href="driver_hook_clean_up.html">H_CLEAN_UP</a></li>
<li><a class="el" href="driver_hook_clone_uids.html">H_CLONE_UIDS</a></li>
<li><a class="el" href="driver_hook_command.html">H_COMMAND</a></li>
<li><a class="el" href="driver_hook_create_clone.html">H_CREATE_CLONE</a></li>
<li><a class="el" href="driver_hook_create_ob.html">H_CREATE_OB</a></li>
<li><a class="el" href="driver_hook_create_super.html">H_CREATE_SUPER</a></li>
<li><a class="el" href="driver_hook_default_method.html">H_DEFAULT_METHOD</a></li>
<li><a class="el" href="driver_hook_default_prompt.html">H_DEFAULT_PROMPT</a></li>
<li><a class="el" href="driver_hook_erq_stop.html">H_ERQ_STOP</a></li>
<li><a class="el" href="driver_hook_include_dirs.html">H_INCLUDE_DIRS</a></li>
<li><a class="el" href="driver_hook_load_uids.html">H_LOAD_UIDS</a></li>
<li><a class="el" href="driver_hook_modify_command.html">H_MODIFY_COMMAND</a></li>
<li><a class="el" href="driver_hook_modify_command_fname.html">H_MODIFY_COMMAND_FNAME</a></li>
<li><a class="el" href="driver_hook_move_object.html">H_MOVE_OBJECT0</a></li>
<li><a class="el" href="driver_hook_msg_discarded.html">H_MSG_DISCARDED</a></li>
<li><a class="el" href="driver_hook_no_echo.html">H_NOECHO</a></li>
<li><a class="el" href="driver_hook_no_ipc_slot.html">H_NO_IPC_SLOT</a></li>
<li><a class="el" href="driver_hook_notify_fail.html">H_NOTIFY_FAIL</a></li>
<li><a class="el" href="driver_hook_print_prompt.html">H_PRINT_PROMPT</a></li>
<li><a class="el" href="driver_hook_regexp_package.html">H_REGEXP_PACKAGE</a></li>
<li><a class="el" href="driver_hook_reset.html">H_RESET</a></li>
<li><a class="el" href="driver_hook_send_notify_fail.html">H_SEND_NOTIFY_FAIL</a></li>
<li><a class="el" href="driver_hook_telnet_neg.html">H_TELNET_NEG</a></li>
</ul>
<dl class="section user"><dt>History:</dt><dd><div class="fragment"><div class="line">introduced (3.2.1) -- the hooks concept</div>
<div class="line">changed (3.2.1@1) -- added H_MOVE_OBJECT0 and H_MOVE_OBJECT1</div>
<div class="line">changed (3.2.1@34) -- added H_CLEAN_UP</div>
<div class="line">changed (3.2.1@51) -- added H_MODIFY_COMMAND</div>
<div class="line">changed (3.2.1@109) -- added H_MODIFY_COMMAND_FNAME</div>
<div class="line">changed (3.2.1@55) -- added H_NOTIFY_FAIL and H_NO_IPC_SLOT</div>
<div class="line">changed (3.2.1@57) -- added H_INCLUDE_DIRS</div>
<div class="line">changed (3.2.1@60) -- added H_TELNET_NEG</div>
<div class="line">changed (3.2.1@85) -- added H_NOECHO and H_ERQ_STOP</div>
<div class="line">changed (3.2.7) -- added H_COMMAND</div>
<div class="line">changed (3.2.9) -- added H_SEND_NOTIFY_FAIL and H_AUTO_INCLUDE</div>
<div class="line">changed (3.3.113) -- added H_DEFAULT_METHOD</div>
<div class="line">changed (3.3.163) -- added H_DEFAULT_PROMPT and H_PRINT_PROMPT</div>
</div><!-- fragment --></dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classefun.html#a2756bce82caa9cc75107c97064b16922" title="This privileged efun sets the driver hook &#39;what&#39; (values are defined in &lt;driver_hook.h&gt;) to &#39;arg&#39;. ">efun::set_driver_hook()</a>, <a class="el" href="driver_hook_move_object.html">move_object</a>, <a class="el" href="driver_applied_overview.html">applied</a>, <a class="el" href="driver_topics_overview.html">topics</a>, <a class="el" href="driver_efun_overview.html">efun</a>, <a class="el" href="driver_internals_overview.html">internals</a>, <a class="el" href="driver_syntax_overview.html">syntax</a>, <a class="el" href="driver_master_overview.html">master</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Mar 9 2017 17:45:24 for LDMud by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
