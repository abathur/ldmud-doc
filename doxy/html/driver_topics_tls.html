<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>LDMud: transport layer security</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LDMud
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('driver_topics_tls.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">transport layer security </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>TLS provides a way to authenticate and encrypt the data send through a network connection. TLS, which stands for Transport Layer Security, is the successor of the well known SSL (Secure Socket Layer).</p>
<p>By enabling TLS during compilation of the driver you can provide a secure channel into the mud to your players.</p>
<p>In difference to other solutions as "sslwrap" or "stunnel" the driver integrated approach has the advantage that the mud sees the real IP of the player, not the IP of the local mud host.</p>
<dl class="section user"><dt>misleading: This manpage might be not quite up to date with the implementation.</dt><dd></dd></dl>
<dl class="section user"><dt>Usage:</dt><dd><p class="startdd">To use TLS configure your driver with <code>--enable-tls option</code>. After starting your driver you have five new efuns (<a class="el" href="classefun.html#a8b5de31f232caee7f2bdfb50e9a626ec" title="Tries to start a TLS-secured connection to the interactive object ob (or this_object() if ob is not g...">efun::tls_init_connection()</a>, <a class="el" href="classefun.html#a640eca286d6cfbc9d0f9f40f7b31269d" title="Shuts down a TLS connection to the interactive object ob (or this_object() if ob is not given) but th...">efun::tls_deinit_connection()</a>, <a class="el" href="classefun.html#ab298aabbd06837fdab935ae82260e51f" title="Returns a string describing the error behind the error number errorno. ">efun::tls_error()</a>, <a class="el" href="classefun.html#a8fff6671c194e17e8d07f03256faf626" title="If ob does not have a TLS connection, if the connection is still being set-up, or if ob is not intera...">efun::tls_query_connection_info()</a>, <a class="el" href="classefun.html#a1d9e28db0cff9d02318184eb56aafdba" title="Returns a positive number if ob connection is TLS secured, 0 if it&#39;s unsecured, and a negative number...">efun::tls_query_connection_state()</a>).</p>
<p>You can switch on TLS by calling <a class="el" href="classefun.html#a8b5de31f232caee7f2bdfb50e9a626ec" title="Tries to start a TLS-secured connection to the interactive object ob (or this_object() if ob is not g...">efun::tls_init_connection()</a>. This can happen in three ways:</p>
<ol type="1">
<li>in <a class="el" href="driver_hook_telnet_neg.html">telnet_neg</a> Advantage of this method is that you can offer TLS on a normal mud port. If you have a limited number of ports this can become important. The TLS connection will be started by the client with help of telnet option STARTTLS. Currently there are no mudclients that support this method.</li>
</ol>
<p>You will have to implement the telnet option STARTTLS (46) for this method. The draft for this can be found here: driver_http:__www.ietf.org_proceedings_99mar_I-D_draft-ietf-tn3270e-telnet-tls-01.txt "http://www.ietf.org/proceedings/99mar/I-D/draft-ietf-tn3270e-telnet-tls-01.txt" Call <a class="el" href="classefun.html#a8b5de31f232caee7f2bdfb50e9a626ec" title="Tries to start a TLS-secured connection to the interactive object ob (or this_object() if ob is not g...">efun::tls_init_connection()</a> to initiate the TLS handshake.</p>
<ol type="1">
<li>in <a class="el" href="classmaster.html#a5ba74ee9cd2ce5203374a79f48f908d7" title="Return a login object that the requested connection should be bound to. ">master::connect()</a> Advantage of this method is that your users can connect with any program that supports TLS/SSL. Examples are telnet-ssl, sslwrap or stunnel. Disadvantage is that you have to spend a dedicated port for this.</li>
</ol>
<p>You have to call <a class="el" href="classefun.html#a8b5de31f232caee7f2bdfb50e9a626ec" title="Tries to start a TLS-secured connection to the interactive object ob (or this_object() if ob is not g...">efun::tls_init_connection()</a> as first command after the player connected (normally in <a class="el" href="classmaster.html#a5ba74ee9cd2ce5203374a79f48f908d7" title="Return a login object that the requested connection should be bound to. ">master::connect()</a>).</p>
<ol type="1">
<li>in an interactive object using a callback. This method is similar to method (1), but not limited to telnet: it is useful for implementing protocols that use STARTTLS like SMTP or IMAP. <a class="el" href="classefun.html#a8b5de31f232caee7f2bdfb50e9a626ec" title="Tries to start a TLS-secured connection to the interactive object ob (or this_object() if ob is not g...">efun::tls_init_connection()</a> can be called at any time by the interactive object.</li>
</ol>
<p>You must not write to the connection after calling this efun until the callback is executed (the prompt will be supressed automatically during this time).</p>
<p>To test your code, you can use the openssl binary. <code>openssl s_client -connect host:port</code> should display your certificate and anything you write after the callback is executed. If you encounter the error message <code>SSL3_GET_RECORD: wrong version number</code> you're probably writing to the connection while you should not.</p>
<p class="enddd"></p>
</dd></dl>
<dl class="section user"><dt>History:</dt><dd><div class="fragment"><div class="line">introduced (3.3.474)</div>
<div class="line">backported (3.2.11)</div>
</div><!-- fragment --></dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classefun.html#a673b9f37b9750af6efb10678180461ab" title="If the global TLS initialisation could not be set up, tls_is_available() returns 0, otherwise 1. ">efun::tls_available()</a>, <a class="el" href="classefun.html#a0c31ebf810d2ec2717c8b6f7245d241b" title="Checks the certificate of the secured connection bound to obj (default is the current object)...">efun::tls_check_certificate()</a>, <a class="el" href="classefun.html#a640eca286d6cfbc9d0f9f40f7b31269d" title="Shuts down a TLS connection to the interactive object ob (or this_object() if ob is not given) but th...">efun::tls_deinit_connection()</a>, <a class="el" href="classefun.html#ab298aabbd06837fdab935ae82260e51f" title="Returns a string describing the error behind the error number errorno. ">efun::tls_error()</a>, <a class="el" href="classefun.html#a8b5de31f232caee7f2bdfb50e9a626ec" title="Tries to start a TLS-secured connection to the interactive object ob (or this_object() if ob is not g...">efun::tls_init_connection()</a>, <a class="el" href="classefun.html#a8fff6671c194e17e8d07f03256faf626" title="If ob does not have a TLS connection, if the connection is still being set-up, or if ob is not intera...">efun::tls_query_connection_info()</a>, <a class="el" href="classefun.html#a1d9e28db0cff9d02318184eb56aafdba" title="Returns a positive number if ob connection is TLS secured, 0 if it&#39;s unsecured, and a negative number...">efun::tls_query_connection_state()</a>, <a class="el" href="classefun.html#a30bd281e29f7465ed9ff74217be3f760" title="Reload the certificates and certificate revocation information. ">efun::tls_refresh_certs()</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="driver_topics_overview.html">Other topics</a></li>
    <li class="footer">Generated on Thu Mar 9 2017 17:45:24 for LDMud by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
